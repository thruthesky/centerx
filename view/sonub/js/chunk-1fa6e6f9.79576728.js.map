{"version":3,"sources":["webpack:///./src/x-vue/widgets/common/Loading.vue?b3ef","webpack:///./src/x-vue/widgets/common/Loading.vue","webpack:///./src/x-vue/widgets/common/Loading.vue?7cc0","webpack:///./src/x-vue/widgets/common/Loading.vue?754c","webpack:///./src/x-vue/svg/CameraSvg.vue?17a0","webpack:///./src/x-vue/svg/CameraSvg.vue","webpack:///./src/x-vue/components/UploadButton.vue?b952","webpack:///./src/x-vue/components/UploadButton.vue","webpack:///./src/x-vue/components/UploadButton.vue?25d3","webpack:///./src/x-vue/components/UploadButton.vue?04af","webpack:///./src/x-vue/components/user/LoginFirst.vue?dca7","webpack:///./src/x-vue/components/user/LoginFirst.vue","webpack:///./src/x-vue/components/user/LoginFirst.vue?7d39","webpack:///./src/x-vue/components/user/LoginFirst.vue?e828","webpack:///./src/x-vue/components/push-notification/PushNotificationIcon.vue?3df0","webpack:///./src/x-vue/components/push-notification/PushNotificationIcon.vue","webpack:///./src/x-vue/components/push-notification/PushNotificationIcon.vue?df5a","webpack:///./src/x-vue/components/push-notification/PushNotificationIcon.vue?426b","webpack:///./src/x-vue/components/chat/components/ChatRoomMessageList.vue?39dd","webpack:///./src/x-vue/components/chat/ChatRoom.vue?03fd","webpack:///./src/views/chat/ChatRoomView.vue?d643","webpack:///./src/x-vue/components/chat/ChatRoom.vue?95d4","webpack:///./src/x-vue/components/chat/components/ChatRoomHeader.vue?d91f","webpack:///./src/x-vue/components/chat/components/ChatRoomHeader.vue","webpack:///./src/x-vue/components/chat/components/ChatRoomHeader.vue?ef03","webpack:///./src/x-vue/components/chat/components/ChatRoomHeader.vue?8732","webpack:///./src/x-vue/components/chat/components/ChatRoomMessageList.vue?08d3","webpack:///./src/x-vue/components/chat/components/ChatRoomMessageList.vue","webpack:///./src/x-vue/components/chat/components/ChatRoomMessageList.vue?eb95","webpack:///./src/x-vue/components/chat/components/ChatRoomMessageList.vue?9754","webpack:///./src/x-vue/components/chat/components/ChatRoomBottomActions.vue?63cd","webpack:///./src/x-vue/components/chat/components/ChatRoomBottomActions.vue","webpack:///./src/x-vue/components/chat/components/ChatRoomBottomActions.vue?2238","webpack:///./src/x-vue/components/chat/components/ChatRoomBottomActions.vue?01a2","webpack:///./src/x-vue/components/chat/ChatRoom.vue","webpack:///./src/x-vue/components/chat/ChatRoom.vue?31cf","webpack:///./src/x-vue/components/chat/ChatRoom.vue?e3ed","webpack:///./src/views/chat/ChatRoomView.vue","webpack:///./src/views/chat/ChatRoomView.vue?0fa7","webpack:///./src/views/chat/ChatRoomView.vue?28d1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","variant","_v","_s","staticRenderFns","default","Loading","component","attrs","script","style","width","defaultSize","height","on","onFileChange","api","instance","mounted","size","event","Promise","user","loggedIn","error","target","files","length","file","fileUpload","onProgress","res","$emit","progress","console","log","UploadButton","props","components","CameraSvg","_user","_e","LoginFirst","onChangeSubscribeOrUnsubscribeTopic","model","value","data","postTopic","callback","$$v","$set","expression","_f","title","rawTopic","topic","isSubscribedToTopic","subscribedByDefault","re","topicSubscription","subscribe","PushNotificationIcon","loading","room","id","$store","state","otherUserProfile","photoUrl","$app","otherUser","getTitle","idx","nicknameOrName","global","roomId","ref","changeRoomTitle","leaveRoom","loadOtherUser","otherUserId","promptToast","message","placement","TOP_CENTER","okCallback","updateTitle","confirm","leave","$router","push","ChatRoomHeader","UserAvatar","messageListId","$event","scrollEventHandler","_l","m","key","isMine","canEdit","refInFor","isImage","isMovie","editMessage","onDeleteMessage","rendered","text","onImageLoadComplete","preventDefault","showImagePreview","scopedSlots","_u","fn","fileImagePreviewUrl","proxy","$bvModal","hide","chatRoomSubscription","Subscription","changes","atBottom","page","scrollToBottom","destroyed","unsubscribe","extra","url","show","deleteMessage","fileDelete","ChatRoomMessageList","onSuccess","directives","name","rawName","domProps","type","indexOf","_k","keyCode","sendMessage","apply","arguments","composing","cancelEdit","sending","textInput","trim","tempText","isEdit","isMessageEdit","displayName","$refs","testInput","focus","sendMessageToUsers","users","subscription","body","click_action","thumbnailUrl","ChatRoomBottomActions","ChatRoom","enter","watchRoute","watchUid","roomInfo","$route","query","firebaseUid","alert","split","userProfile","store","usersInfo","otherUserInfo","loggedInUserInfo","loginUserUid","Object","keys","updateGlobalRoomUsersInfo","ChatUserRoomView"],"mappings":"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","file":"js/chunk-1fa6e6f9.79576728.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-center my-2\",class:['text-' + _vm.variant]},[_c('b-spinner',{staticClass:\"align-middle mr-2\"}),_c('strong',[_vm._v(_vm._s(\"loading...\"))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from \"vue-property-decorator\";\n\n@Component({})\nexport default class Loading extends Vue {\n  @Prop({ default: \"success\" }) variant!: string;\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=43c32022&\"\nimport script from \"./Loading.vue?vue&type=script&lang=ts&\"\nexport * from \"./Loading.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 512 512\"}},[_c('path',{attrs:{\"d\":\"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./CameraSvg.vue?vue&type=template&id=556f7269&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pr-2 position-relative overflow-hidden pointer\"},[_c('camera-svg',{staticClass:\"pointer\",style:({ width: (_vm.defaultSize + \"px\"), height: (_vm.defaultSize + \"px\") })}),_c('input',{staticClass:\"h-100 top right position-absolute fs-lg opacity-0 pointer\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n// import { XHelper } from \"@/x-vue-helper/x-helper\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { ApiService } from \"../services/api.service\";\nimport ComponentService from \"../services/component.service\";\nimport CameraSvg from \"@/x-vue/svg/CameraSvg.vue\";\n\ninterface HTMLInputEvent extends Event {\n  target: HTMLInputElement & EventTarget;\n}\n\n@Component({\n  props: [\"size\"],\n  components: { CameraSvg },\n})\nexport default class UploadButton extends Vue {\n  size!: number;\n\n  /**\n   * Icon default size\n   */\n  defaultSize = 35;\n\n  api = ApiService.instance;\n\n  mounted(): void {\n    if (this.size) this.defaultSize = this.size;\n  }\n\n  async onFileChange(event: HTMLInputEvent): Promise<void> {\n    if (!this.api.user.loggedIn) {\n      ComponentService.instance.error(\"error_login_first\");\n      return;\n    }\n\n    if (event.target.files === null || event.target?.files?.length === 0) {\n      // console.log(\"User cancelled upload\");\n      return;\n    }\n    const file = event.target.files[0];\n\n    try {\n      const res = await this.api.fileUpload(file, {}, this.onProgress);\n      this.$emit(\"success\", res);\n    } catch (e) {\n      // XHelper.instance.error(e);\n      ComponentService.instance.error(e);\n    }\n  }\n\n  onProgress(progress: number): void {\n    console.log(progress);\n    this.$emit(\"progress\", progress);\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UploadButton.vue?vue&type=template&id=54a32098&\"\nimport script from \"./UploadButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./UploadButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.api._user.notLoggedIn)?_c('div',{staticClass:\"p-2 text-center rounded bg-secondary\"},[_c('h3',[_vm._v(\"Login First\")])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport { ApiService } from \"../../services/api.service\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n@Component({})\nexport default class LoginFirst extends Vue {\n  api = ApiService.instance;\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginFirst.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginFirst.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LoginFirst.vue?vue&type=template&id=09e730eb&\"\nimport script from \"./LoginFirst.vue?vue&type=script&lang=ts&\"\nexport * from \"./LoginFirst.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"push-notification-icon\"},[_c('b-form-checkbox',{attrs:{\"name\":\"check-button\",\"switch\":\"\"},on:{\"change\":_vm.onChangeSubscribeOrUnsubscribeTopic},model:{value:(_vm.data[_vm.postTopic]),callback:function ($$v) {_vm.$set(_vm.data, _vm.postTopic, $$v)},expression:\"data[postTopic]\"}},[_c('span',[_vm._v(_vm._s(_vm._f(\"t\")(_vm.title)))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport { ApiService } from \"@/x-vue/services/api.service\";\nimport Service from \"@/x-vue/services/component.service\";\nimport { Vue, Prop, Component } from \"vue-property-decorator\";\n\n@Component({})\nexport default class PushNotificationIcon extends Vue {\n  @Prop({ default: \"defaultTopic\" }) topic!: string;\n  @Prop({ default: \"\" }) rawTopic!: string;\n  @Prop({ default: \"\" }) title!: string;\n\n  @Prop({ default: false }) subscribedByDefault!: boolean;\n\n  // 'notifyPost_' is the prefix for post topic subscription\n  get postTopic(): string {\n    if (this.rawTopic.length) return this.rawTopic;\n    return \"notifyPost_\" + this.topic;\n  }\n\n  data: { [index: string]: boolean } = {\n    [this.postTopic]: false,\n  };\n\n  async mounted(): Promise<void> {\n    try {\n      const re = await ApiService.instance.isSubscribedToTopic(this.postTopic, this.subscribedByDefault);\n      this.data[this.postTopic] = re[this.postTopic] === \"Y\" ? true : false;\n    } catch (e) {\n      Service.instance.error(e);\n    }\n  }\n\n  async onChangeSubscribeOrUnsubscribeTopic(): Promise<void> {\n    if (!ApiService.instance.user.loggedIn) {\n      this.data[this.postTopic] = false;\n      Service.instance.error(\"error_login_first\");\n      return;\n    }\n    try {\n      await ApiService.instance.topicSubscription({\n        topic: this.postTopic,\n        subscribe: this.data[this.postTopic] ? \"Y\" : \"N\",\n      });\n    } catch (e) {\n      Service.instance.error(e);\n    }\n  }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PushNotificationIcon.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PushNotificationIcon.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PushNotificationIcon.vue?vue&type=template&id=53b593f6&\"\nimport script from \"./PushNotificationIcon.vue?vue&type=script&lang=ts&\"\nexport * from \"./PushNotificationIcon.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoomMessageList.vue?vue&type=style&index=0&id=079233c6&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoom.vue?vue&type=style&index=0&id=4d08d434&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[(!_vm.loading && _vm.room.id)?_c('ChatRoom'):_vm._e(),(!_vm.loading && _vm.$store.state.user.loggedIn)?_c('LoginFirst'):_vm._e(),(_vm.loading)?_c('Loading',{attrs:{\"variant\":\"primary\"}}):_vm._e(),_c('div',[_vm._v(_vm._s(_vm.otherUserProfile.photoUrl))]),_c('div',[_vm._v(_vm._s(_vm.$app.api.user.photoUrl))]),_c('div',[_vm._v(_vm._s(_vm.$store.state.user.photoUrl))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"chat-message d-flex flex-column\"},[_c('ChatRoomHeader'),_c('ChatRoomMessageList'),_c('ChatRoomBottomActions')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"chat-room-header\"},[_c('div',{staticClass:\"d-flex justify-content-between mb-2\"},[_c('div',{staticClass:\"user-avatar d-flex align-items-center text-nowrap\"},[_c('UserAvatar',{staticClass:\"mr-2\",attrs:{\"user\":_vm.otherUser}}),_c('div',[(_vm.room.getTitle)?_c('div',[_vm._v(_vm._s(_vm.room.getTitle))]):(_vm.otherUser.idx)?_c('div',[_vm._v(\"(\"+_vm._s(_vm.otherUser.idx)+\") \"+_vm._s(_vm.otherUser.nicknameOrName))]):_vm._e()])],1),_c('div',{staticClass:\"chat-options d-flex align-items-center\"},[_c('PushNotificationIcon',{attrs:{\"rawTopic\":_vm.room.topic,\"subscribedByDefault\":true}}),_c('button',{staticClass:\"btn btn-sm py-2\",attrs:{\"id\":'chat-options-popover-' + _vm.room.global.roomId}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'cog'],\"size\":\"lg\"}})],1),_c('router-link',{staticClass:\"btn btn-sm py-2 pointer\",attrs:{\"to\":'/chat'}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'times'],\"size\":\"lg\"}})],1),_c('b-popover',{ref:\"popover\",attrs:{\"placement\":\"bottomleft\",\"target\":'chat-options-popover-' + _vm.room.global.roomId,\"triggers\":\"click blur\"}},[_c('div',{staticClass:\"p-2 pointer\",on:{\"click\":_vm.changeRoomTitle}},[_c('font-awesome-icon',{staticClass:\"mr-2\",attrs:{\"icon\":['fas', 'edit']}}),_vm._v(\" \"+_vm._s(_vm._f(\"t\")(\"edit_room_title\"))+\" \")],1),_c('router-link',{staticClass:\"p-2 pointer\",attrs:{\"to\":'/chat'}},[_c('font-awesome-icon',{staticClass:\"mr-2\",attrs:{\"icon\":['fas', 'list']}}),_vm._v(\" \"+_vm._s(_vm._f(\"t\")(\"goto_room_list\"))+\" \")],1),_c('div',{staticClass:\"p-2 pointer\",on:{\"click\":_vm.leaveRoom}},[_c('font-awesome-icon',{staticClass:\"mr-2\",attrs:{\"icon\":['fas', 'sign-out-alt']}}),_vm._v(\" \"+_vm._s(_vm._f(\"t\")(\"leave_room\"))+\" \")],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { UserModel } from \"@/x-vue/interfaces/interfaces\";\nimport { ApiService } from \"@/x-vue/services/api.service\";\nimport { ChatRoomService } from \"@/x-vue/services/chat/chat.room.service\";\nimport ComponentService, { PLACEMENT } from \"@/x-vue/services/component.service\";\nimport { Vue, Component } from \"vue-property-decorator\";\n\nimport UserAvatar from \"@/x-vue/components/user/UserAvatar.vue\";\n\nimport PushNotificationIcon from \"@/x-vue/components/push-notification/PushNotificationIcon.vue\";\nimport { t } from \"@/x-vue/services/functions\";\n\n@Component({\n  components: {\n    UserAvatar,\n    PushNotificationIcon,\n  },\n})\nexport default class ChatRoomHeader extends Vue {\n  room = ChatRoomService.instance;\n\n  otherUser: UserModel = new UserModel();\n\n  mounted(): void {\n    this.loadOtherUser();\n  }\n\n  async loadOtherUser(): Promise<void> {\n    if (!ChatRoomService.instance.global.otherUserId) return;\n    const otherUserId: string = ChatRoomService.instance.global.otherUserId;\n    try {\n      this.otherUser = await ApiService.instance.otherUserProfile(otherUserId);\n    } catch (error) {\n      ComponentService.instance.error(error);\n    }\n  }\n\n  async changeRoomTitle(): Promise<void> {\n    ComponentService.instance.promptToast({\n      title: t(\"change_room_title\"),\n      message: this.room.getTitle,\n      placement: PLACEMENT.TOP_CENTER,\n      okCallback: async (title: string): Promise<void> => {\n        try {\n          await this.room.updateTitle(title);\n        } catch (error) {\n          ComponentService.instance.error(error);\n        }\n      },\n      // cancelCallback: () => console.log(\"no\"),\n    });\n  }\n\n  async leaveRoom(): Promise<void> {\n    try {\n      const re = await ComponentService.instance.confirm(t(\"chat_room_delete\"), t(\"chat_room_delete_confirmation\"));\n      if (re === false) return;\n\n      await this.room.leave();\n      this.$router.push(\"/chat\");\n    } catch (e) {\n      ComponentService.instance.error(e);\n    }\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoomHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoomHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatRoomHeader.vue?vue&type=template&id=71f4615a&\"\nimport script from \"./ChatRoomHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatRoomHeader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex flex-column overflow-auto flex-grow-1 mb-2\",attrs:{\"id\":_vm.room.messageListId},on:{\"scroll\":function($event){return _vm.room.scrollEventHandler()}}},[_c('div',{staticClass:\"flex-grow-1\"}),_vm._l((_vm.room.messages),function(m){return _c('div',{key:m.id,staticClass:\"chat-bubble mb-1 rounded-lg my-1 p-2 text-break white\",class:m.isMine ? 'text-right my-chat ml-auto' : 'text-left other-chat mr-auto',attrs:{\"id\":'chat-message-popover-' + m.id}},[(m.canEdit && m.isMine)?_c('b-popover',{ref:\"popover\",refInFor:true,attrs:{\"placement\":\"left\",\"target\":'chat-message-popover-' + m.id,\"triggers\":\"hover focus\"}},[(!m.isImage && !m.isMovie)?_c('div',{staticClass:\"pointer\",on:{\"click\":function($event){return _vm.room.editMessage(m)}}},[_c('font-awesome-icon',{staticClass:\"mr-2\",attrs:{\"icon\":['fas', 'edit']}}),_vm._v(\" \"+_vm._s(_vm._f(\"t\")(\"edit\"))+\" \")],1):_vm._e(),_c('div',{staticClass:\"pointer\",on:{\"click\":function($event){return _vm.onDeleteMessage(m)}}},[_c('font-awesome-icon',{staticClass:\"mr-2\",attrs:{\"icon\":['fas', 'trash']}}),_vm._v(\" \"+_vm._s(_vm._f(\"t\")(\"delete\"))+\" \")],1)]):_vm._e(),(m.isMine)?_c('div',[(m.isImage)?_c('div',[(!m.rendered)?_c('b-spinner'):_vm._e(),_c('b-img',{attrs:{\"src\":m.text,\"fluid\":\"\",\"alt\":m.text},on:{\"load\":function($event){return _vm.room.onImageLoadComplete(m)},\"click\":function($event){$event.preventDefault();return _vm.showImagePreview(m)}}})],1):(m.isMovie)?_c('div',[_c('video',{attrs:{\"width\":\"320\",\"height\":\"240\",\"controls\":\"\"}},[_c('source',{attrs:{\"src\":m.text}}),_vm._v(\" Your browser does not support the video tag. \")])]):(m.isFile)?_c('div',[_c('a',{staticClass:\"white\",attrs:{\"href\":m.text,\"download\":\"\"}},[_vm._v(_vm._s(m.text)+\" \"),_c('font-awesome-icon',{staticClass:\"mr-2\",attrs:{\"icon\":['fas', 'download']}})],1)]):_c('div',[_vm._v(_vm._s(_vm.room.text(m, true)))])]):_c('div',[(m.isImage)?_c('div',[(!m.rendered)?_c('b-spinner'):_vm._e(),_c('b-img',{attrs:{\"src\":m.text,\"fluid\":\"\",\"alt\":m.text},on:{\"load\":function($event){return _vm.room.onImageLoadComplete(m)},\"click\":function($event){$event.preventDefault();return _vm.showImagePreview(m)}}})],1):(m.isMovie)?_c('div',[_c('video',{attrs:{\"width\":\"320\",\"height\":\"240\",\"controls\":\"\"}},[_c('source',{attrs:{\"src\":m.text}}),_vm._v(\" Your browser does not support the video tag. \")])]):(m.isFile)?_c('div',[_c('a',{staticClass:\"white\",attrs:{\"href\":m.text,\"download\":\"\"}},[_vm._v(_vm._s(m.text)+\" \"),_c('font-awesome-icon',{staticClass:\"mr-2\",attrs:{\"icon\":['fas', 'download']}})],1)]):_c('div',[_vm._v(_vm._s(_vm.room.text(m, true)))])])],1)}),_c('b-modal',{attrs:{\"id\":'file-preview-modal',\"hide-footer\":\"\"},scopedSlots:_vm._u([{key:\"modal-title\",fn:function(){return [_vm._v(_vm._s(_vm.fileImagePreviewUrl))]},proxy:true}])},[_c('div',[_c('b-img',{attrs:{\"src\":_vm.fileImagePreviewUrl,\"fluid\":\"\",\"alt\":_vm.fileImagePreviewUrl}})],1),_c('b-button',{staticClass:\"mt-3\",attrs:{\"block\":\"\"},on:{\"click\":function($event){return _vm.$bvModal.hide('file-preview-modal')}}},[_vm._v(\"Close\")])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ChatRoomService } from \"@/x-vue/services/chat/chat.room.service\";\nimport { Vue, Component } from \"vue-property-decorator\";\nimport { ChatMessageModel } from \"@/x-vue/services/chat/chat.interface\";\nimport { Subscription } from \"rxjs\";\nimport ComponentService from \"@/x-vue/services/component.service\";\nimport { t } from \"@/x-vue/services/functions\";\nimport { ApiService } from \"@/x-vue/services/api.service\";\n@Component({\n  components: {},\n})\nexport default class ChatRoomMessageList extends Vue {\n  room = ChatRoomService.instance;\n  fileImagePreviewUrl = \"\";\n\n  chatRoomSubscription: Subscription = new Subscription();\n\n  mounted(): void {\n    this.chatRoomSubscription = ChatRoomService.instance.changes.subscribe(() => {\n      if (ChatRoomService.instance.atBottom || ChatRoomService.instance.page == 1) {\n        console.log(\"scroll to bottom\", ChatRoomService.instance.atBottom, ChatRoomService.instance.page == 1);\n        ChatRoomService.instance.scrollToBottom();\n      }\n    });\n  }\n\n  destroyed(): void {\n    console.log(\"ChatMessageListScreen::destroyed()\");\n    ChatRoomService.instance.unsubscribe();\n    this.chatRoomSubscription.unsubscribe();\n  }\n\n  showImagePreview(m: ChatMessageModel): void {\n    this.fileImagePreviewUrl = \"\" + m.extra.url;\n    this.$bvModal.show(\"file-preview-modal\");\n  }\n\n  async onDeleteMessage(m: ChatMessageModel): Promise<void> {\n    try {\n      const re = await ComponentService.instance.confirm(\n        t(\"chat_message_delete\"),\n        t(\"chat_message_delete_confirmation\")\n      );\n      if (re === false) return;\n      await this.room.deleteMessage(m);\n\n      if (m.isMovie || m.isImage) {\n        ApiService.instance.fileDelete(m.extra.idx as number);\n      }\n    } catch (e) {\n      ComponentService.instance.error(e);\n    }\n  }\n\n  // onMouseDown(message: ChatMessageModel): void {\n  //   console.log(message.isImage);\n  //   if (!message.isMine) return;\n  //   message.longPress = true;\n  //   // console.log(\"onMouseDown\", message.longPress);\n  //   setTimeout(() => {\n  //     // console.log(\"onMouseDown\", message.longPress);\n  //     if (message.longPress) {\n  //       console.log(\"show edit\");\n  //       // $('#chat-message-popover-' + message.id).popover('show')\n  //     }\n  //   }, 2000);\n  // }\n\n  // onMouseUp(message: ChatMessageModel): void {\n  //   if (!message.isMine) return;\n  //   message.longPress = false;\n  //   // console.log(\"onMouseUp\", message.longPress);\n  // }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoomMessageList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoomMessageList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatRoomMessageList.vue?vue&type=template&id=079233c6&scoped=true&\"\nimport script from \"./ChatRoomMessageList.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatRoomMessageList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ChatRoomMessageList.vue?vue&type=style&index=0&id=079233c6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"079233c6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"chat-room-bottom-actions\"},[(_vm.progress && _vm.progress != 100)?_c('b-progress',{staticClass:\"mb-3 ml-2 mr-2\",attrs:{\"value\":_vm.progress,\"max\":\"100\"}}):_vm._e(),_c('div',{staticClass:\"d-flex\"},[_c('div',[_c('UploadButton',{on:{\"success\":_vm.onSuccess,\"progress\":function($event){_vm.progress = $event}}})],1),_c('div',{staticClass:\"w-100 position-relative\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.room.textInput),expression:\"room.textInput\"}],ref:\"testInput\",staticClass:\"w-100 py-1\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.room.textInput)},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage.apply(null, arguments)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.room, \"textInput\", $event.target.value)}}}),(_vm.room.isMessageEdit)?_c('div',{staticClass:\"red position-absolute top right py-1 px-2\",on:{\"click\":function($event){return _vm.room.cancelEdit()}}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'times']}})],1):_vm._e()]),_c('button',{staticClass:\"btn btn-sm btn-primary ml-2 px-5\",on:{\"click\":_vm.sendMessage}},[_vm._v(_vm._s(_vm._f(\"t\")(\"Send\")))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { FileModel } from \"@/x-vue/interfaces/interfaces\";\nimport { ApiService } from \"@/x-vue/services/api.service\";\nimport { ChatRoomService } from \"@/x-vue/services/chat/chat.room.service\";\nimport ComponentService from \"@/x-vue/services/component.service\";\nimport { Vue, Component } from \"vue-property-decorator\";\n\nimport UploadButton from \"@/x-vue/components/UploadButton.vue\";\nimport { isImageUrl } from \"@/x-vue/services/chat/chat.functions\";\n\nimport { t } from \"@/x-vue/services/functions\";\n\n@Component({\n  components: {\n    UploadButton,\n  },\n})\nexport default class ChatRoomBottomActions extends Vue {\n  room = ChatRoomService.instance;\n\n  sending = false;\n  progress = 0;\n\n  async sendMessage(): Promise<void> {\n    if (this.room.textInput.trim().length == 0 || this.sending) return;\n    this.sending = true;\n    const tempText: string = this.room.textInput;\n    this.room.textInput = \"\";\n    try {\n      const isEdit = this.room.isMessageEdit;\n      await this.room.sendMessage({\n        text: tempText,\n        displayName: ApiService.instance.user.nicknameOrName,\n      });\n      this.sending = false;\n\n      (this.$refs.testInput as HTMLElement)?.focus();\n\n      if (isEdit == null) {\n        /// Send Push Notification Silently\n        ApiService.instance.sendMessageToUsers({\n          users: this.room.otherUserId,\n          subscription: this.room.topic,\n          title: ApiService.instance.user.nicknameOrName + \" \" + t(\"sent_a_message\"),\n          body: tempText,\n          click_action: \"chat-message?roomId=\" + this.room.id,\n          data: {\n            type: \"chat\",\n            roomId: this.room.id,\n          },\n        });\n      }\n    } catch (e) {\n      ComponentService.instance.error(e);\n\n      this.sending = false;\n    }\n  }\n\n  async onSuccess(file: FileModel): Promise<void> {\n    console.log(\"onSuccess::\", file);\n\n    try {\n      await this.room.sendMessage({\n        text: isImageUrl(file.url) ? file.thumbnailUrl : file.url,\n        displayName: ApiService.instance.user.nicknameOrName,\n        extra: { url: file.url, idx: file.idx },\n      });\n      this.sending = false;\n      /// Send Push Notification Silently\n      ApiService.instance.sendMessageToUsers({\n        users: this.room.otherUserId,\n        subscription: this.room.topic,\n        title: ApiService.instance.user.nicknameOrName + \" \" + t(\"sent_a_message\"),\n        body: t(\"sent_a_file\"),\n        click_action: \"chat-message?roomId=\" + this.room.id,\n        data: {\n          type: \"chat\",\n          roomId: this.room.id,\n        },\n      });\n\n      (this.$refs.testInput as HTMLElement)?.focus();\n    } catch (e) {\n      ComponentService.instance.error(e);\n\n      this.sending = false;\n    }\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoomBottomActions.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoomBottomActions.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatRoomBottomActions.vue?vue&type=template&id=07d6181a&\"\nimport script from \"./ChatRoomBottomActions.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatRoomBottomActions.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component } from \"vue-property-decorator\";\nimport ChatRoomHeader from \"./components/ChatRoomHeader.vue\";\nimport ChatRoomMessageList from \"./components/ChatRoomMessageList.vue\";\nimport ChatRoomBottomActions from \"./components/ChatRoomBottomActions.vue\";\n@Component({\n  components: {\n    ChatRoomHeader,\n    ChatRoomMessageList,\n    ChatRoomBottomActions,\n  },\n})\nexport default class ChatRoom extends Vue {}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoom.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoom.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatRoom.vue?vue&type=template&id=4d08d434&scoped=true&\"\nimport script from \"./ChatRoom.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatRoom.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ChatRoom.vue?vue&type=style&index=0&id=4d08d434&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d08d434\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport { Component, Watch } from \"vue-property-decorator\";\nimport { ChatRoomEnter, ChatRoomService } from \"@/x-vue/services/chat/chat.room.service\";\n\nimport ChatRoom from \"@/x-vue/components/chat/ChatRoom.vue\";\nimport { ApiService } from \"@/x-vue/services/api.service\";\nimport { AppService } from \"@/service/app.service\";\nimport store from \"@/store\";\nimport { UserModel } from \"@/x-vue/interfaces/interfaces\";\n\nimport LoginFirst from \"@/x-vue/components/user/LoginFirst.vue\";\nimport Loading from \"@/x-vue/widgets/common/Loading.vue\";\n\n@Component({\n  components: {\n    ChatRoom,\n    LoginFirst,\n    Loading,\n  },\n})\nexport default class ChatUserRoomView extends Vue {\n  room = ChatRoomService.instance;\n\n  otherUserProfile = new UserModel();\n  loading = false;\n\n  mounted(): void {\n    // console.log(\"ChatUserRoomView::ChatRoom; \");\n    this.enter();\n  }\n\n  @Watch(\"$route.query.roomId\")\n  watchRoute(): void {\n    this.room.unsubscribe();\n    this.enter();\n  }\n\n  @Watch(\"$route.query.firebaseUid\")\n  watchUid(): void {\n    this.room.unsubscribe();\n    this.enter();\n  }\n\n  async enter(): Promise<void> {\n    this.loading = true;\n    const roomInfo: ChatRoomEnter = {\n      displayName: AppService.instance.user.displayName,\n    };\n    // @todo change query.id to query.roomId\n    if (this.$route.query.roomId != null) {\n      roomInfo.id = \"\" + this.$route.query.roomId;\n    } else if (this.$route.query.firebaseUid) {\n      roomInfo.users = (this.$route.query.firebaseUid as string).split(\",\");\n    } else {\n      return AppService.instance.alert(\"Missing params\", \"missing roomId or firebaseUid\");\n    }\n\n    try {\n      await this.room.enter(roomInfo);\n      this.loading = false;\n      if (this.room.global.otherUserId) {\n        this.otherUserProfile = await ApiService.instance.otherUserProfile(this.room.global.otherUserId);\n\n        // const userProfile = await ApiService.instance.userProfile();\n        const userProfile = ApiService.instance.user; // profile photo is not updated if new photo is uploaded\n\n        console.log(\"enter::otherUserProfile::\", this.otherUserProfile);\n        console.log(\"enter::userProfile::\", userProfile);\n        console.log(\"enter::store.state.user::\", store.state.user);\n        // eslint-disable-next-line  @typescript-eslint/no-explicit-any\n        let usersInfo: Record<string, any> = {};\n        // room was created/usersInfo is not set\n        if (!this.room.global.usersInfo) {\n          usersInfo = {\n            [this.otherUserProfile.firebaseUid]: {\n              photoUrl: this.otherUserProfile.photoUrl,\n              displayName: this.otherUserProfile.nicknameOrName,\n            },\n            [this.room.loginUserUid]: {\n              photoUrl: store.state.user.photoUrl,\n              displayName: store.state.user.nicknameOrName,\n            },\n          };\n        } else {\n          // check if the userInfo has been change, if yes then update\n          // if no changes then skip\n          const otherUserInfo = this.room.global.usersInfo[this.otherUserProfile.firebaseUid];\n          if (\n            !otherUserInfo ||\n            otherUserInfo.displayName != this.otherUserProfile.nicknameOrName ||\n            otherUserInfo.photoUrl != this.otherUserProfile.photoUrl\n          ) {\n            usersInfo[this.otherUserProfile.firebaseUid] = {\n              photoUrl: this.otherUserProfile.photoUrl,\n              displayName: this.otherUserProfile.nicknameOrName,\n            };\n          }\n          const loggedInUserInfo = this.room.global.usersInfo[this.room.loginUserUid];\n          if (\n            !loggedInUserInfo ||\n            loggedInUserInfo.displayName != store.state.user.nicknameOrName ||\n            loggedInUserInfo.photoUrl != store.state.user.photoUrl\n          ) {\n            usersInfo[this.room.loginUserUid] = {\n              photoUrl: store.state.user.photoUrl,\n              displayName: store.state.user.nicknameOrName,\n            };\n          }\n        }\n        console.log(\"usersInfo::\", Object.keys(usersInfo).length, usersInfo);\n        if (Object.keys(usersInfo).length) this.room.updateGlobalRoomUsersInfo(usersInfo);\n      }\n    } catch (e) {\n      this.$app.error(e);\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoomView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRoomView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatRoomView.vue?vue&type=template&id=46709e18&\"\nimport script from \"./ChatRoomView.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatRoomView.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}