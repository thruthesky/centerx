{"version":3,"sources":["webpack:///./src/views/chat/ChatUserRoom.vue?4ff1","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?197e","webpack:///./src/x-vue/components/chat/ChatMessageList.vue","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?6c4c","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?2f3a","webpack:///./src/views/chat/ChatUserRoom.vue","webpack:///./src/views/chat/ChatUserRoom.vue?3a74","webpack:///./src/views/chat/ChatUserRoom.vue?2280","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?96df"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticRenderFns","staticClass","attrs","on","onScroll","_l","rooms","m","key","id","class","senderUid","loginUserUid","_s","text","directives","name","rawName","value","expression","ref","domProps","$event","target","composing","$set","sendMessage","instance","sending","chatRoomSubscription","Subscription","mounted","changes","subscribe","message","console","log","$nextTick","elmnt","document","getElementById","scrollIntoView","destroyed","unsubscribe","Promise","textInput","trim","length","tempText","displayName","$refs","testInput","focus","error","ChatMessageList","component","chat","enter","roomInfo","$route","query","users","split","hatch","e","$app","ChatUserRoomView","components"],"mappings":"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","file":"js/chunk-47dfc50e.57744a36.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"My Messages\")]),_c('hr'),_c('ChatMessageList')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"chat-message d-flex flex-column\"},[_c('div',{staticClass:\"d-flex flex-column overflow-auto flex-grow-1\",attrs:{\"id\":\"chat-message-list\"},on:{\"scroll\":_vm.onScroll}},[_c('div',{staticClass:\"flex-grow-1\"}),_vm._l((_vm.rooms.messages),function(m){return _c('div',{key:m.id,staticClass:\"chat-bubble mb-1 rounded-lg my-1 px-2 text-break\",class:m.senderUid == _vm.rooms.loginUserUid ? 'text-right bg-primary ml-auto' : 'text-left bg-info mr-auto',attrs:{\"id\":m.id}},[_vm._v(\" \"+_vm._s(m.text)+\" \")])})],2),_c('div',{staticClass:\"d-flex\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rooms.textInput),expression:\"rooms.textInput\"}],ref:\"testInput\",staticClass:\"w-100\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.rooms.textInput)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.rooms, \"textInput\", $event.target.value)}}}),_c('button',{staticClass:\"btn btn-sm btn-primary ml-2 px-5\",on:{\"click\":_vm.sendMessage}},[_vm._v(\"Send\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ChatRoomService } from \"@/x-vue/services/chat/chat.room.service\";\nimport ComponentService from \"@/x-vue/services/component.service\";\nimport { Subscription } from \"rxjs\";\nimport { Vue, Component } from \"vue-property-decorator\";\n\n@Component({})\nexport default class ChatMessageList extends Vue {\n  rooms = ChatRoomService.instance;\n\n  sending = false;\n\n  chatRoomSubscription: Subscription = new Subscription();\n\n  mounted(): void {\n    this.chatRoomSubscription = ChatRoomService.instance.changes.subscribe((message) => {\n      console.log(\"message:::::\", message);\n\n      //\n      this.$nextTick(() => {\n        let elmnt = document.getElementById(`${message.id}`);\n        elmnt?.scrollIntoView(false);\n      });\n\n      // let elmnt = document.getElementById(`${message.id}`);\n      // elmnt?.scrollIntoView(false);\n\n      // let elmnt = document.getElementById(\"chat-message-list\");\n      // elmnt?.scrollTo(0, elmnt.scrollHeight);\n    });\n  }\n\n  destroyed(): void {\n    console.log(\"ChatRoomScreen::destroyed()\");\n    ChatRoomService.instance.unsubscribe();\n    this.chatRoomSubscription.unsubscribe();\n  }\n\n  async sendMessage(): Promise<void> {\n    if (this.rooms.textInput.trim().length == 0 || this.sending) return;\n    this.sending = true;\n    const tempText: string = this.rooms.textInput;\n    this.rooms.textInput = \"\";\n    try {\n      await this.rooms.sendMessage({\n        text: tempText,\n        displayName: this.rooms.displayName,\n      });\n      this.sending = false;\n\n      (this.$refs.testInput as HTMLElement)?.focus();\n    } catch (e) {\n      ComponentService.instance.error(e);\n\n      this.sending = false;\n    }\n  }\n\n  // onScroll($event: Event): void {\n  //   // console.log($event);\n  // }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatMessageList.vue?vue&type=template&id=13752d3a&scoped=true&\"\nimport script from \"./ChatMessageList.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatMessageList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ChatMessageList.vue?vue&type=style&index=0&id=13752d3a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13752d3a\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport { Component } from \"vue-property-decorator\";\nimport { ChatService } from \"@/x-vue/services/chat/chat.service\";\nimport { ChatRoomService } from \"@/x-vue/services/chat/chat.room.service\";\n\nimport ChatMessageList from \"@/x-vue/components/chat/ChatMessageList.vue\";\n\n@Component({\n  components: {\n    ChatMessageList,\n  },\n})\nexport default class ChatUserRoomView extends Vue {\n  chat = ChatService.instance;\n\n  mounted(): void {\n    console.log(\"ChatUserRoomView; \");\n    this.enter();\n  }\n\n  async enter(): Promise<void> {\n    const roomInfo: Record<string, unknown> = {};\n    if (this.$route.query.id != null) {\n      roomInfo[\"id\"] = this.$route.query.id;\n    } else if (this.$route.query.users) {\n      roomInfo[\"users\"] = (this.$route.query.users as string).split(\",\");\n    } else {\n      return console.log(\"missing id or users firebaseUid\");\n    }\n\n    if (this.$route.query.hatch != null) {\n      roomInfo[\"hatch\"] = this.$route.query.hatch == \"true\" ? true : false;\n    }\n\n    try {\n      ChatRoomService.instance.enter(roomInfo);\n    } catch (e) {\n      this.$app.error(e);\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatUserRoom.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatUserRoom.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatUserRoom.vue?vue&type=template&id=064c5be2&\"\nimport script from \"./ChatUserRoom.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatUserRoom.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageList.vue?vue&type=style&index=0&id=13752d3a&scoped=true&lang=css&\""],"sourceRoot":""}