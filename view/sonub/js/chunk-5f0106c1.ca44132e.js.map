{"version":3,"sources":["webpack:///./src/views/chat/ChatUserRoom.vue?9b6c","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?705d","webpack:///./src/x-vue/svg/GearFillSvg.vue?d3df","webpack:///./src/x-vue/svg/GearFillSvg.vue","webpack:///./src/x-vue/components/chat/ChatMessageList.vue","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?6c4c","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?2f3a","webpack:///./src/views/chat/ChatUserRoom.vue","webpack:///./src/views/chat/ChatUserRoom.vue?3a74","webpack:///./src/views/chat/ChatUserRoom.vue?2280","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?aa1d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","staticClass","_v","_s","rooms","global","title","roomId","attrs","ref","on","leaveRoom","_f","$event","scrollController","_l","m","key","id","class","senderUid","loginUserUid","text","directives","name","rawName","value","expression","domProps","target","composing","$set","sendMessage","script","component","instance","sending","chatRoomSubscription","Subscription","mounted","changes","subscribe","message","console","log","destroyed","unsubscribe","Promise","textInput","trim","length","tempText","displayName","$refs","testInput","focus","error","onScroll","leave","$router","push","ChatMessageList","components","GearFillSvg","chat","enter","roomInfo","$route","query","users","split","hatch","e","$app","ChatUserRoomView"],"mappings":"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","file":"js/chunk-5f0106c1.ca44132e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ChatMessageList')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"chat-message d-flex flex-column\"},[_c('div',{staticClass:\"d-flex justify-content-between mb-2\"},[_c('div',{staticClass:\"py-2\"},[_vm._v(_vm._s(_vm.rooms.global.title || _vm.rooms.global.roomId))]),_c('div',{staticClass:\"chat-options\"},[_c('button',{staticClass:\"btn btn-sm\",attrs:{\"id\":'chat-options-popover-' + _vm.rooms.global.roomId}},[_c('GearFillSvg')],1),_c('b-popover',{ref:\"popover\",attrs:{\"placement\":\"bottomleft\",\"target\":'chat-options-popover-' + _vm.rooms.global.roomId,\"triggers\":\"click blur\"}},[_c('button',{staticClass:\"btn btn-sm btn-success\",attrs:{\"data-cy\":\"mine-edit-button\"},on:{\"click\":_vm.leaveRoom}},[_vm._v(\" \"+_vm._s(_vm._f(\"t\")(\"leave\"))+\" \")])])],1)]),_c('div',{staticClass:\"d-flex flex-column overflow-auto flex-grow-1\",attrs:{\"id\":\"chat-message-list\"},on:{\"scroll\":function($event){return _vm.rooms.scrollController()}}},[_c('div',{staticClass:\"flex-grow-1\"}),_vm._l((_vm.rooms.messages),function(m){return _c('div',{key:m.id,staticClass:\"chat-bubble mb-1 rounded-lg my-1 px-2 text-break\",class:m.senderUid == _vm.rooms.loginUserUid ? 'text-right bg-primary ml-auto' : 'text-left bg-info mr-auto',attrs:{\"id\":m.id}},[_vm._v(\" \"+_vm._s(m.text)+\" \")])})],2),_c('div',{staticClass:\"d-flex\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rooms.textInput),expression:\"rooms.textInput\"}],ref:\"testInput\",staticClass:\"w-100\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.rooms.textInput)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.rooms, \"textInput\", $event.target.value)}}}),_c('button',{staticClass:\"btn btn-sm btn-primary ml-2 px-5\",on:{\"click\":_vm.sendMessage}},[_vm._v(\"Send\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{staticClass:\"bi bi-gear-fill\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"16\",\"height\":\"16\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 16 16\"}},[_c('path',{attrs:{\"d\":\"M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./GearFillSvg.vue?vue&type=template&id=3895d0d2&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ChatRoomService } from \"@/x-vue/services/chat/chat.room.service\";\nimport ComponentService from \"@/x-vue/services/component.service\";\nimport { Subscription } from \"rxjs\";\nimport { Vue, Component } from \"vue-property-decorator\";\n\nimport GearFillSvg from \"@/x-vue/svg/GearFillSvg.vue\";\n\n@Component({\n  components: {\n    GearFillSvg,\n  },\n})\nexport default class ChatMessageList extends Vue {\n  rooms = ChatRoomService.instance;\n\n  sending = false;\n\n  chatRoomSubscription: Subscription = new Subscription();\n\n  mounted(): void {\n    this.chatRoomSubscription = ChatRoomService.instance.changes.subscribe((message) => {\n      console.log(\"message:::::\", message);\n\n      //\n      // this.$nextTick(() => {\n      //   let elmnt = document.getElementById(`${message.id}`);\n      //   elmnt?.scrollIntoView(false);\n      // });\n\n      // let elmnt = document.getElementById(`${message.id}`);\n      // elmnt?.scrollIntoView(false);\n\n      // let elmnt = document.getElementById(\"chat-message-list\");\n      // elmnt?.scrollTo(0, elmnt.scrollHeight);\n    });\n  }\n\n  destroyed(): void {\n    console.log(\"ChatRoomScreen::destroyed()\");\n    ChatRoomService.instance.unsubscribe();\n    this.chatRoomSubscription.unsubscribe();\n  }\n\n  async sendMessage(): Promise<void> {\n    if (this.rooms.textInput.trim().length == 0 || this.sending) return;\n    this.sending = true;\n    const tempText: string = this.rooms.textInput;\n    this.rooms.textInput = \"\";\n    try {\n      await this.rooms.sendMessage({\n        text: tempText,\n        displayName: this.rooms.displayName,\n      });\n      this.sending = false;\n\n      (this.$refs.testInput as HTMLElement)?.focus();\n    } catch (e) {\n      ComponentService.instance.error(e);\n\n      this.sending = false;\n    }\n  }\n\n  onScroll(): void {\n    // console.log($event);\n  }\n\n  async leaveRoom(): Promise<void> {\n    await this.rooms.leave();\n    this.$router.push(\"/chat\");\n  }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatMessageList.vue?vue&type=template&id=9eda4e4e&scoped=true&\"\nimport script from \"./ChatMessageList.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatMessageList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ChatMessageList.vue?vue&type=style&index=0&id=9eda4e4e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9eda4e4e\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport { Component } from \"vue-property-decorator\";\nimport { ChatService } from \"@/x-vue/services/chat/chat.service\";\nimport { ChatRoomService } from \"@/x-vue/services/chat/chat.room.service\";\n\nimport ChatMessageList from \"@/x-vue/components/chat/ChatMessageList.vue\";\n\n@Component({\n  components: {\n    ChatMessageList,\n  },\n})\nexport default class ChatUserRoomView extends Vue {\n  chat = ChatService.instance;\n\n  mounted(): void {\n    console.log(\"ChatUserRoomView; \");\n    this.enter();\n  }\n\n  async enter(): Promise<void> {\n    const roomInfo: Record<string, unknown> = {};\n    if (this.$route.query.id != null) {\n      roomInfo[\"id\"] = this.$route.query.id;\n    } else if (this.$route.query.users) {\n      roomInfo[\"users\"] = (this.$route.query.users as string).split(\",\");\n    } else {\n      return console.log(\"missing id or users firebaseUid\");\n    }\n\n    if (this.$route.query.hatch != null) {\n      roomInfo[\"hatch\"] = this.$route.query.hatch == \"true\" ? true : false;\n    }\n\n    try {\n      ChatRoomService.instance.enter(roomInfo);\n    } catch (e) {\n      this.$app.error(e);\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatUserRoom.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatUserRoom.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatUserRoom.vue?vue&type=template&id=687e7658&\"\nimport script from \"./ChatUserRoom.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatUserRoom.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageList.vue?vue&type=style&index=0&id=9eda4e4e&scoped=true&lang=css&\""],"sourceRoot":""}