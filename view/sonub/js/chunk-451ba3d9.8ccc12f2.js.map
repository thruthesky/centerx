{"version":3,"sources":["webpack:///./src/x-vue/svg/CameraSvg.vue?9e9f","webpack:///./src/x-vue/svg/CameraSvg.vue","webpack:///./src/x-vue/components/UploadButton.vue?79f5","webpack:///./src/x-vue/components/UploadButton.vue","webpack:///./src/x-vue/components/UploadButton.vue?25d3","webpack:///./src/x-vue/components/UploadButton.vue?04af","webpack:///./src/views/chat/ChatUserRoom.vue?c5ec","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?2fa7","webpack:///./src/x-vue/components/chat/ChatMessageList.vue","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?6c4c","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?2f3a","webpack:///./src/views/chat/ChatUserRoom.vue","webpack:///./src/views/chat/ChatUserRoom.vue?3a74","webpack:///./src/views/chat/ChatUserRoom.vue?2280","webpack:///./src/x-vue/components/push-notification/PushNotificationIcon.vue?020b","webpack:///./src/x-vue/components/push-notification/PushNotificationIcon.vue","webpack:///./src/x-vue/components/push-notification/PushNotificationIcon.vue?df5a","webpack:///./src/x-vue/components/push-notification/PushNotificationIcon.vue?426b","webpack:///./src/x-vue/components/chat/ChatMessageList.vue?077a"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","script","component","staticClass","style","width","defaultSize","height","on","onFileChange","api","instance","mounted","size","event","Promise","_user","loggedIn","error","target","files","length","file","fileUpload","onProgress","res","$emit","progress","UploadButton","props","components","CameraSvg","chat","room","_e","otherUser","global","_v","_s","title","idx","nicknameOrName","topic","roomId","ref","changeRoomTitle","_f","leaveRoom","messageListId","$event","scrollEventHandler","_l","m","key","id","class","senderUid","loginUserUid","text","onSuccess","directives","name","rawName","value","expression","domProps","type","indexOf","_k","keyCode","sendMessage","apply","arguments","composing","$set","sending","chatRoomSubscription","Subscription","changes","subscribe","atBottom","page","scrollToBottom","loadOtherUser","otherUserProfile","otherUserId","destroyed","console","log","unsubscribe","textInput","trim","tempText","displayName","$refs","testInput","focus","promptToast","message","placement","TOP_CENTER","okCallback","updateTitle","cancelCallback","confirm","re","leave","$router","push","url","thumbnailUrl","extra","ChatMessageList","UserAvatar","PushNotificationIcon","enter","roomInfo","hatch","$route","query","uid","split","e","$app","ChatUserRoomView","onChangeSubscribeOrUnsubscribeTopic","model","data","postTopic","callback","$$v","rawTopic","isSubscribedToTopic","subscribedByDefault","topicSubscription","default"],"mappings":"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","file":"js/chunk-451ba3d9.8ccc12f2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 512 512\"}},[_c('path',{attrs:{\"d\":\"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./CameraSvg.vue?vue&type=template&id=556f7269&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pr-2 position-relative overflow-hidden pointer\"},[_c('camera-svg',{staticClass:\"pointer\",style:({ width: (_vm.defaultSize + \"px\"), height: (_vm.defaultSize + \"px\") })}),_c('input',{staticClass:\"h-100 top right position-absolute fs-lg opacity-0 pointer\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n// import { XHelper } from \"@/x-vue-helper/x-helper\";\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\nimport { ApiService } from \"../services/api.service\";\nimport ComponentService from \"../services/component.service\";\nimport CameraSvg from \"@/x-vue/svg/CameraSvg.vue\";\n\ninterface HTMLInputEvent extends Event {\n  target: HTMLInputElement & EventTarget;\n}\n\n@Component({\n  props: [\"size\"],\n  components: { CameraSvg },\n})\nexport default class UploadButton extends Vue {\n  size!: number;\n\n  /**\n   * Icon default size\n   */\n  defaultSize = 35;\n\n  api = ApiService.instance;\n\n  mounted(): void {\n    if (this.size) this.defaultSize = this.size;\n  }\n\n  async onFileChange(event: HTMLInputEvent): Promise<void> {\n    if (!this.api._user.loggedIn) {\n      ComponentService.instance.error(\"error_login_first\");\n      return;\n    }\n\n    if (event.target.files === null || event.target?.files?.length === 0) {\n      // console.log(\"User cancelled upload\");\n      return;\n    }\n    const file = event.target.files[0];\n\n    try {\n      const res = await this.api.fileUpload(file, {}, this.onProgress);\n      this.$emit(\"success\", res);\n    } catch (e) {\n      // XHelper.instance.error(e);\n      ComponentService.instance.error(e);\n    }\n  }\n\n  onProgress(progress: number): void {\n    // console.log(progress);\n    this.$emit(\"progress\", progress);\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UploadButton.vue?vue&type=template&id=f29119d6&\"\nimport script from \"./UploadButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./UploadButton.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.chat.room.id)?_c('ChatMessageList'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"chat-message d-flex flex-column\"},[_c('div',{staticClass:\"d-flex justify-content-between mb-2\"},[_c('div',{staticClass:\"admin-user-avatar d-flex align-items-center text-nowrap\"},[_c('UserAvatar',{staticClass:\"mr-2\",attrs:{\"user\":_vm.otherUser}}),_c('div',[(_vm.room.global.title)?_c('div',[_vm._v(_vm._s(_vm.room.global.title))]):(_vm.otherUser.idx)?_c('div',[_vm._v(\"(\"+_vm._s(_vm.otherUser.idx)+\") \"+_vm._s(_vm.otherUser.nicknameOrName))]):_vm._e()])],1),_c('div',{staticClass:\"chat-options d-flex align-items-center\"},[_c('PushNotificationIcon',{attrs:{\"rawTopic\":_vm.room.topic,\"subscribedByDefault\":true}}),_c('button',{staticClass:\"btn btn-sm py-2\",attrs:{\"id\":'chat-options-popover-' + _vm.room.global.roomId}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'cog'],\"size\":\"lg\"}})],1),_c('router-link',{staticClass:\"btn btn-sm py-2 pointer\",attrs:{\"to\":'/chat'}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'times'],\"size\":\"lg\"}})],1),_c('b-popover',{ref:\"popover\",attrs:{\"placement\":\"bottomleft\",\"target\":'chat-options-popover-' + _vm.room.global.roomId,\"triggers\":\"click blur\"}},[_c('div',{staticClass:\"p-2 pointer\",on:{\"click\":_vm.changeRoomTitle}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'edit']}}),_vm._v(\" \"+_vm._s(_vm._f(\"t\")(\"edit_room_title\"))+\" \")],1),_c('router-link',{staticClass:\"p-2 pointer\",attrs:{\"to\":'/chat'}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'list']}}),_vm._v(\" \"+_vm._s(_vm._f(\"t\")(\"goto_room_list\"))+\" \")],1),_c('div',{staticClass:\"p-2 pointer\",on:{\"click\":_vm.leaveRoom}},[_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'sign-out-alt']}}),_vm._v(\" \"+_vm._s(_vm._f(\"t\")(\"leave_room\"))+\" \")],1)],1)],1)]),_c('div',{staticClass:\"d-flex flex-column overflow-auto flex-grow-1 mb-2\",attrs:{\"id\":_vm.room.messageListId},on:{\"scroll\":function($event){return _vm.room.scrollEventHandler()}}},[_c('div',{staticClass:\"flex-grow-1\"}),(_vm.room.loading)?_c('div',{staticClass:\"py-2 mx-auto\"},[_c('b-spinner')],1):_vm._e(),_vm._l((_vm.room.messages),function(m){return _c('div',{key:m.id,staticClass:\"chat-bubble mb-1 rounded-lg my-1 p-2 text-break\",class:m.senderUid == _vm.room.loginUserUid ? 'text-right bg-primary ml-auto' : 'text-left bg-info mr-auto',attrs:{\"id\":m.id}},[_vm._v(\" \"+_vm._s(m.text)+\" \")])})],2),_c('div',{staticClass:\"d-flex\"},[_c('div',[_c('UploadButton',{on:{\"success\":_vm.onSuccess}})],1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.room.textInput),expression:\"room.textInput\"}],ref:\"testInput\",staticClass:\"w-100\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.room.textInput)},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage.apply(null, arguments)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.room, \"textInput\", $event.target.value)}}}),_c('button',{staticClass:\"btn btn-sm btn-primary ml-2 px-5\",on:{\"click\":_vm.sendMessage}},[_vm._v(_vm._s(_vm._f(\"t\")(\"Send\")))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { FileModel, UserModel } from \"@/x-vue/interfaces/interfaces\";\nimport { ApiService } from \"@/x-vue/services/api.service\";\nimport { ChatRoomService } from \"@/x-vue/services/chat/chat.room.service\";\nimport ComponentService, { PLACEMENT } from \"@/x-vue/services/component.service\";\nimport { Subscription } from \"rxjs\";\nimport { Vue, Component } from \"vue-property-decorator\";\n\nimport UploadButton from \"@/x-vue/components/UploadButton.vue\";\nimport UserAvatar from \"@/x-vue/components/user/UserAvatar.vue\";\nimport { isImageUrl } from \"@/x-vue/services/chat/chat.functions\";\n\nimport PushNotificationIcon from \"@/x-vue/components/push-notification/PushNotificationIcon.vue\";\n\n@Component({\n  components: {\n    UserAvatar,\n    UploadButton,\n    PushNotificationIcon,\n  },\n})\nexport default class ChatMessageList extends Vue {\n  room = ChatRoomService.instance;\n\n  sending = false;\n\n  chatRoomSubscription: Subscription = new Subscription();\n\n  otherUser: UserModel = new UserModel();\n\n  mounted(): void {\n    this.chatRoomSubscription = ChatRoomService.instance.changes.subscribe(() => {\n      // console.log(\"message::changes::\", message);\n      // console.log(\"chatRoomSubscription\", ChatRoomService.instance.atBottom, ChatRoomService.instance.page == 1);\n      if (ChatRoomService.instance.atBottom || ChatRoomService.instance.page == 1) {\n        ChatRoomService.instance.scrollToBottom();\n      }\n    });\n\n    this.loadOtherUser();\n  }\n\n  async loadOtherUser(): Promise<void> {\n    try {\n      // console.log(\"ChatRoomService.instance.global.otherUserId::\", ChatRoomService.instance.global.otherUserId);\n      this.otherUser = await ApiService.instance.otherUserProfile(\n        ChatRoomService.instance.global.otherUserId as string\n      );\n\n      // console.log(\"loadOtherUser\", this.otherUser);\n    } catch (error) {\n      ComponentService.instance.error(error);\n    }\n  }\n\n  destroyed(): void {\n    console.log(\"ChatMessageListScreen::destroyed()\");\n    ChatRoomService.instance.unsubscribe();\n    this.chatRoomSubscription.unsubscribe();\n  }\n\n  async sendMessage(): Promise<void> {\n    if (this.room.textInput.trim().length == 0 || this.sending) return;\n    this.sending = true;\n    const tempText: string = this.room.textInput;\n    this.room.textInput = \"\";\n    try {\n      await this.room.sendMessage({\n        text: tempText,\n        displayName: ApiService.instance._user.nicknameOrName,\n      });\n      this.sending = false;\n\n      (this.$refs.testInput as HTMLElement)?.focus();\n    } catch (e) {\n      ComponentService.instance.error(e);\n\n      this.sending = false;\n    }\n  }\n\n  async changeRoomTitle(): Promise<void> {\n    ComponentService.instance.promptToast({\n      title: \"Change Room Title\",\n      message: this.room.title || this.room.id,\n      placement: PLACEMENT.TOP_CENTER,\n      okCallback: async (title: string): Promise<void> => {\n        console.log(\"title\", title);\n        try {\n          await this.room.updateTitle(title);\n        } catch (error) {\n          ComponentService.instance.error(error);\n        }\n      },\n      cancelCallback: () => console.log(\"no\"),\n    });\n  }\n\n  async leaveRoom(): Promise<void> {\n    try {\n      const re = await ComponentService.instance.confirm(\"Chat Room delete\", \"Do you want to delete this chat room?\");\n      if (re === false) return;\n\n      await this.room.leave();\n      this.$router.push(\"/chat\");\n    } catch (e) {\n      ComponentService.instance.error(e);\n    }\n  }\n\n  async onSuccess(file: FileModel): Promise<void> {\n    console.log(\"onSuccess::\", file);\n\n    try {\n      await this.room.sendMessage({\n        text: isImageUrl(file.url) ? file.thumbnailUrl : file.url,\n        displayName: ApiService.instance._user.nicknameOrName,\n        extra: { url: file.url },\n      });\n      this.sending = false;\n\n      (this.$refs.testInput as HTMLElement)?.focus();\n    } catch (e) {\n      ComponentService.instance.error(e);\n\n      this.sending = false;\n    }\n  }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatMessageList.vue?vue&type=template&id=2763f081&scoped=true&\"\nimport script from \"./ChatMessageList.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatMessageList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ChatMessageList.vue?vue&type=style&index=0&id=2763f081&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2763f081\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport { Component } from \"vue-property-decorator\";\nimport { ChatService } from \"@/x-vue/services/chat/chat.service\";\nimport { ChatRoomService } from \"@/x-vue/services/chat/chat.room.service\";\n\nimport ChatMessageList from \"@/x-vue/components/chat/ChatMessageList.vue\";\n\n@Component({\n  components: {\n    ChatMessageList,\n  },\n})\nexport default class ChatUserRoomView extends Vue {\n  chat = ChatService.instance;\n\n  mounted(): void {\n    // console.log(\"ChatUserRoomView::ChatMessageList; \");\n    this.enter();\n  }\n\n  async enter(): Promise<void> {\n    const roomInfo: Record<string, unknown> = {\n      hatch: false,\n    };\n    if (this.$route.query.id != null) {\n      roomInfo[\"id\"] = this.$route.query.id;\n    } else if (this.$route.query.uid) {\n      roomInfo[\"users\"] = (this.$route.query.uid as string).split(\",\");\n    } else {\n      return console.log(\"missing id or users firebaseUid\");\n    }\n\n    if (this.$route.query.hatch != null) {\n      roomInfo[\"hatch\"] = this.$route.query.hatch == \"true\" ? true : false;\n    }\n\n    try {\n      ChatRoomService.instance.enter(roomInfo);\n    } catch (e) {\n      this.$app.error(e);\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatUserRoom.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatUserRoom.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChatUserRoom.vue?vue&type=template&id=bb55854e&\"\nimport script from \"./ChatUserRoom.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChatUserRoom.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"push-notification-icon\"},[_c('b-form-checkbox',{attrs:{\"name\":\"check-button\",\"switch\":\"\"},on:{\"change\":_vm.onChangeSubscribeOrUnsubscribeTopic},model:{value:(_vm.data[_vm.postTopic]),callback:function ($$v) {_vm.$set(_vm.data, _vm.postTopic, $$v)},expression:\"data[postTopic]\"}},[_c('span',[_vm._v(_vm._s(_vm._f(\"t\")(_vm.title)))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport { ApiService } from \"@/x-vue/services/api.service\";\nimport Service from \"@/x-vue/services/component.service\";\nimport { Vue, Prop, Component } from \"vue-property-decorator\";\n\n@Component({})\nexport default class PushNotificationIcon extends Vue {\n  @Prop({ default: \"defaultTopic\" }) topic!: string;\n  @Prop({ default: \"\" }) rawTopic!: string;\n  @Prop({ default: \"\" }) title!: string;\n\n  @Prop({ default: false }) subscribedByDefault!: boolean;\n\n  // 'notifyPost_' is the prefix for post topic subscription\n  get postTopic(): string {\n    if (this.rawTopic.length) return this.rawTopic;\n    return \"notifyPost_\" + this.topic;\n  }\n\n  data: { [index: string]: boolean } = {\n    [this.postTopic]: false,\n  };\n\n  async mounted(): Promise<void> {\n    try {\n      const re = await ApiService.instance.isSubscribedToTopic(this.postTopic, this.subscribedByDefault);\n      this.data[this.postTopic] = re[this.postTopic] === \"Y\" ? true : false;\n    } catch (e) {\n      Service.instance.error(e);\n    }\n  }\n\n  async onChangeSubscribeOrUnsubscribeTopic(): Promise<void> {\n    if (!ApiService.instance._user.loggedIn) {\n      this.data[this.postTopic] = false;\n      Service.instance.error(\"error_login_first\");\n      return;\n    }\n    try {\n      await ApiService.instance.topicSubscription({\n        topic: this.postTopic,\n        subscribe: this.data[this.postTopic] ? \"Y\" : \"N\",\n      });\n    } catch (e) {\n      Service.instance.error(e);\n    }\n  }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PushNotificationIcon.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PushNotificationIcon.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PushNotificationIcon.vue?vue&type=template&id=2dcc8a76&\"\nimport script from \"./PushNotificationIcon.vue?vue&type=script&lang=ts&\"\nexport * from \"./PushNotificationIcon.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageList.vue?vue&type=style&index=0&id=2763f081&scoped=true&lang=css&\""],"sourceRoot":""}