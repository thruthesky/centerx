(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47dfc50e"],{"5ab4":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("My Messages")]),s("hr"),s("ChatMessageList")],1)},r=[],o=(s("d3b7"),s("ac1f"),s("1276"),s("9ab4")),i=s("2b0e"),a=s("1b40"),u=s("0dc0"),c=s("e982"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"chat-message d-flex flex-column"},[s("div",{staticClass:"d-flex flex-column overflow-auto flex-grow-1",attrs:{id:"chat-message-list"},on:{scroll:t.onScroll}},[s("div",{staticClass:"flex-grow-1"}),t._l(t.rooms.messages,(function(e){return s("div",{key:e.id,staticClass:"chat-bubble mb-1 rounded-lg my-1 px-2 text-break",class:e.senderUid==t.rooms.loginUserUid?"text-right bg-primary ml-auto":"text-left bg-info mr-auto",attrs:{id:e.id}},[t._v(" "+t._s(e.text)+" ")])}))],2),s("div",{staticClass:"d-flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.rooms.textInput,expression:"rooms.textInput"}],ref:"testInput",staticClass:"w-100",attrs:{type:"text"},domProps:{value:t.rooms.textInput},on:{input:function(e){e.target.composing||t.$set(t.rooms,"textInput",e.target.value)}}}),s("button",{staticClass:"btn btn-sm btn-primary ml-2 px-5",on:{click:t.sendMessage}},[t._v("Send")])])])},d=[],h=(s("498a2"),s("190e")),m=s("a6e8"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rooms=c["a"].instance,e.sending=!1,e.chatRoomSubscription=new m["a"],e}return Object(o["c"])(e,t),e.prototype.mounted=function(){var t=this;this.chatRoomSubscription=c["a"].instance.changes.subscribe((function(e){console.log("message:::::",e),t.$nextTick((function(){var t=document.getElementById(""+e.id);null===t||void 0===t||t.scrollIntoView(!1)}))}))},e.prototype.destroyed=function(){console.log("ChatRoomScreen::destroyed()"),c["a"].instance.unsubscribe(),this.chatRoomSubscription.unsubscribe()},e.prototype.sendMessage=function(){var t;return Object(o["a"])(this,void 0,Promise,(function(){var e,s;return Object(o["d"])(this,(function(n){switch(n.label){case 0:if(0==this.rooms.textInput.trim().length||this.sending)return[2];this.sending=!0,e=this.rooms.textInput,this.rooms.textInput="",n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.rooms.sendMessage({text:e,displayName:this.rooms.displayName})];case 2:return n.sent(),this.sending=!1,null===(t=this.$refs.testInput)||void 0===t||t.focus(),[3,4];case 3:return s=n.sent(),h["b"].instance.error(s),this.sending=!1,[3,4];case 4:return[2]}}))}))},e=Object(o["b"])([Object(a["a"])({})],e),e}(a["c"]),b=p,f=b,g=(s("b1e8"),s("2877")),v=Object(g["a"])(f,l,d,!1,null,"13752d3a",null),x=v.exports,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chat=u["a"].instance,e}return Object(o["c"])(e,t),e.prototype.mounted=function(){console.log("ChatUserRoomView; "),this.enter()},e.prototype.enter=function(){return Object(o["a"])(this,void 0,Promise,(function(){var t;return Object(o["d"])(this,(function(e){if(t={},null!=this.$route.query.id)t["id"]=this.$route.query.id;else{if(!this.$route.query.users)return[2,console.log("missing id or users firebaseUid")];t["users"]=this.$route.query.users.split(",")}null!=this.$route.query.hatch&&(t["hatch"]="true"==this.$route.query.hatch);try{c["a"].instance.enter(t)}catch(s){this.$app.error(s)}return[2]}))}))},e=Object(o["b"])([Object(a["a"])({components:{ChatMessageList:x}})],e),e}(i["default"]),w=y,j=w,O=Object(g["a"])(j,n,r,!1,null,null,null);e["default"]=O.exports},a133:function(t,e,s){},b1e8:function(t,e,s){"use strict";s("a133")}}]);
//# sourceMappingURL=chunk-47dfc50e.57744a36.js.map