(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7034e8e8"],{"0ca9":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text-center my-2",class:["text-"+t.variant]},[i("b-spinner",{staticClass:"align-middle mr-2"}),i("strong",[t._v(t._s("loading..."))])],1)},o=[],r=i("9ab4"),s=i("1b40"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["c"])(e,t),Object(r["b"])([Object(s["b"])({default:"success"})],e.prototype,"variant",void 0),e=Object(r["b"])([Object(s["a"])({})],e),e}(s["c"]),l=a,c=l,p=i("2877"),d=Object(p["a"])(c,n,o,!1,null,null,null);e["a"]=d.exports},"481a":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("point-history")],1)},o=[],r=i("9ab4"),s=i("1b40"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("h1",[t._v(t._s(t._f("t")("point_history")))]),i("div",[t._v(t._s(t._f("t")("count"))+": "+t._s(t.pointHistories.length))]),i("div",[t._v(t._s(t._f("t")("point_added"))+": "+t._s(t.summary.total_point_apply_increase))]),i("div",[t._v(t._s(t._f("t")("point_decrease"))+": "+t._s(t.summary.total_point_apply_decrease))]),i("label",[t._v(t._s(t._f("t")("begin_end_date")))]),i("div",{staticClass:"d-flex justify-content-between"},[i("label",[t._v(" "+t._s(t._f("t")("begin_date"))+" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.options.beginDate,expression:"options.beginDate"}],attrs:{type:"date",min:t.beginAtMin,max:t.beginAtMax},domProps:{value:t.options.beginDate},on:{change:t.search,input:function(e){e.target.composing||t.$set(t.options,"beginDate",e.target.value)}}})]),i("label",[t._v(" "+t._s(t._f("t")("end_date"))+" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.options.endDate,expression:"options.endDate"}],attrs:{type:"date",min:t.endAtMin,max:t.endAtMax},domProps:{value:t.options.endDate},on:{change:t.search,input:function(e){e.target.composing||t.$set(t.options,"endDate",e.target.value)}}})])]),i("section",{staticClass:"overflow-auto mb-3"},[i("b-table",{attrs:{"table-class":"text-center",small:"",striped:"",hover:"",items:t.pointHistories,fields:t.visibleFields,busy:t.loading,bordered:!0,responsive:"true","head-variant":"dark"},scopedSlots:t._u([{key:"head()",fn:function(e){return[i("div",{staticClass:"text-nowrap"},[t._v(t._s(t._f("t")(e.label)))])]}},{key:"cell(action)",fn:function(e){return[t._v(" "+t._s(t._f("t")(t.getAction(e.item)))+" "),t.actionTo(e.item)?i("router-link",{attrs:{to:t.actionTo(e.item)}},[i("BoxArrowUpRightSvg")],1):t._e()]}},{key:"cell(title)",fn:function(e){return[t._v(" "+t._s(t.title(e.item))+" "),t.actionTo(e.item)?i("router-link",{attrs:{to:t.actionTo(e.item)}},[i("BoxArrowUpRightSvg")],1):t._e()]}},{key:"cell(fromUserPointApply)",fn:function(e){return[t._v(" "+t._s(t.pointApply(e.item))+" ")]}},{key:"cell(fromUserPointAfter)",fn:function(e){return[t._v(" "+t._s(t.pointAfter(e.item))+" ")]}},{key:"cell(createdAt)",fn:function(e){return[t._v(" "+t._s(t.date(e.item.createdAt))+" ")]}},{key:"table-busy",fn:function(){return[i("Loading")]},proxy:!0}])})],1),t.loading||t.pointHistories.length?t._e():i("div",{staticClass:"alert alert-info"},[t._v(t._s(t._f("t")("no_records_found")))])])},l=[],c=(i("4de4"),i("ac1f"),i("841c"),i("d3b7"),i("caad"),i("2532"),i("9f3a")),p=i("190e"),d=i("d661"),u=i("5a0c"),_=i.n(u),f=i("0ca9"),m=i("812b"),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pointHistories=[],e.loading=!1,e.beginAtMin="",e.beginAtMax=_()().format("YYYY-MM-DD"),e.endAtMin="",e.endAtMax=e.beginAtMax,e.options={beginDate:_()().hour(-24).format("YYYY-MM-DD"),endDate:e.beginAtMax},e.summary={total_point_apply_increase:0,total_point_apply_decrease:0},e.fields=[{key:"action",visible:!0},{key:"title",visible:!0},{key:"fromUserPointApply",label:"point_apply",visible:!0},{key:"fromUserPointAfter",label:"point_after",visible:!0},{key:"createdAt",label:"Date",visible:!0}],e}return Object(r["c"])(e,t),Object.defineProperty(e.prototype,"visibleFields",{get:function(){return this.fields.filter((function(t){return t.visible}))},enumerable:!1,configurable:!0}),e.prototype.mounted=function(){console.log("PointHistory::"),this.search()},e.prototype.search=function(){return Object(r["a"])(this,void 0,Promise,(function(){var t,e,i,n,o,s,a,l;return Object(r["d"])(this,(function(r){switch(r.label){case 0:if(t=_()(this.options.endDate).diff(_()(this.options.beginDate),"d"),t<0)return[2];if(t>90&&p["b"].instance.alert("date range","error_more_than_90days_date_difference"),this.loading)return[2];this.loading=!0,r.label=1;case 1:return r.trys.push([1,3,,4]),e=this,[4,c["a"].instance.userPointHistory(this.options)];case 2:for(e.pointHistories=r.sent(),this.summary.total_point_apply_increase=0,this.summary.total_point_apply_decrease=0,i=this.$app.user.idx,n=0,o=this.pointHistories;n<o.length;n++)s=o[n],a=0,i==s.fromUserIdx?a=s.fromUserPointApply:i==s.toUserIdx&&(a=s.toUserPointApply),a>0?this.summary.total_point_apply_increase+=a:this.summary.total_point_apply_decrease+=a;return console.log(this.pointHistories),[3,4];case 3:return l=r.sent(),this.$emit("error",l),[3,4];case 4:return this.loading=!1,[2]}}))}))},e.prototype.pointApply=function(t){return t.fromUserIdx==this.$app.user.idx?t.fromUserPointApply:t.toUserIdx==this.$app.user.idx?t.toUserPointApply:0},e.prototype.pointAfter=function(t){return t.fromUserIdx==this.$app.user.idx?t.fromUserPointAfter:t.toUserIdx==this.$app.user.idx?t.toUserPointAfter:0},e.prototype.date=function(t){return Object(d["i"])(t)},e.prototype.getAction=function(t){if("dislike"==t.action||"like"==t.action){var e=0==t.post.parentIdx?"post":"comment";if("dislike"==t.action&&t.fromUserIdx==this.$app.user.idx)return"dislike_deduction_for_disliking_a_"+e;if("dislike"==t.action&&t.toUserIdx==this.$app.user.idx)return"your_"+e+"_got_disliked";if("like"==t.action&&t.fromUserIdx==this.$app.user.idx)return"like_deduction_for_liking_a_"+e;if("like"==t.action&&t.toUserIdx==this.$app.user.idx)return"your_"+e+"_got_liked"}else{if("createPost"==t.action)return"you_created_a_post";if("deletePost"==t.action)return"you_deleted_a_post";if("createComment"==t.action)return"you_commented_a_post";if("deleteComment"==t.action)return"you_deleted_a_comment";if("advertisement.start"==t.action)return"you_started_an_advertisement";if("advertisement.stop"==t.action)return"you_stopped_an_advertisement";if("advertisement.cancel"==t.action)return"you_canceled_an_advertisement"}return t.action},e.prototype.title=function(t){if(0==t.post.parentIdx){if(t.post.deletedAt)return Object(d["g"])("post_deleted");if(t.post.title)return t.post.title}else if(0!=t.post.parentIdx){if(t.post.deletedAt)return Object(d["g"])("comment_deleted");if(t.post.content)return t.post.content}return Object(d["g"])("no_title")},e.prototype.actionTo=function(t){return t.post.idx&&t.post.deletedAt?"":t.action.includes("advertisement.")?"/advertisement/edit/"+t.entity:t.action.includes("Post")||t.action.includes("Comment")||t.action.includes("like")?"/"+t.entity:""},e=Object(r["b"])([Object(s["a"])({components:{Loading:f["a"],BoxArrowUpRightSvg:m["a"]}})],e),e}(s["c"]),v=b,y=v,h=i("2877"),g=Object(h["a"])(y,a,l,!1,null,null,null),x=g.exports,A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["c"])(e,t),e=Object(r["b"])([Object(s["a"])({components:{PointHistory:x}})],e),e}(s["c"]),k=A,j=k,U=Object(h["a"])(j,n,o,!1,null,null,null);e["default"]=U.exports},"812b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"bi bi-box-arrow-in-up-right",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M6.364 13.5a.5.5 0 0 0 .5.5H13.5a1.5 1.5 0 0 0 1.5-1.5v-10A1.5 1.5 0 0 0 13.5 1h-10A1.5 1.5 0 0 0 2 2.5v6.636a.5.5 0 1 0 1 0V2.5a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v10a.5.5 0 0 1-.5.5H6.864a.5.5 0 0 0-.5.5z"}}),i("path",{attrs:{"fill-rule":"evenodd",d:"M11 5.5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793l-8.147 8.146a.5.5 0 0 0 .708.708L10 6.707V10.5a.5.5 0 0 0 1 0v-5z"}})])},o=[],r=i("2877"),s={},a=Object(r["a"])(s,n,o,!1,null,null,null);e["a"]=a.exports}}]);
//# sourceMappingURL=chunk-7034e8e8.6d3ddb01.js.map