(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97ebda12"],{"0e25":function(t,e,s){},a51d:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"push-notification-icon"},[s("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{change:t.onChangeSubscribeOrUnsubscribeTopic},model:{value:t.data[t.postTopic],callback:function(e){t.$set(t.data,t.postTopic,e)},expression:"data[postTopic]"}},[s("span",[t._v(t._s(t._f("t")(t.title)))])])],1)},n=[],a=(s("d3b7"),s("9ab4")),o=s("9f3a"),i=s("190e"),c=s("1b40"),u=function(t){function e(){var e,s=null!==t&&t.apply(this,arguments)||this;return s.data=(e={},e[s.postTopic]=!1,e),s}return Object(a["c"])(e,t),Object.defineProperty(e.prototype,"postTopic",{get:function(){return this.rawTopic.length?this.rawTopic:"notifyPost_"+this.topic},enumerable:!1,configurable:!0}),e.prototype.mounted=function(){return Object(a["a"])(this,void 0,Promise,(function(){var t,e;return Object(a["d"])(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,o["a"].instance.isSubscribedToTopic(this.postTopic,this.subscribedByDefault)];case 1:return t=s.sent(),this.data[this.postTopic]="Y"===t[this.postTopic],[3,3];case 2:return e=s.sent(),i["b"].instance.error(e),[3,3];case 3:return[2]}}))}))},e.prototype.onChangeSubscribeOrUnsubscribeTopic=function(){return Object(a["a"])(this,void 0,Promise,(function(){var t;return Object(a["d"])(this,(function(e){switch(e.label){case 0:if(!o["a"].instance.user.loggedIn)return this.data[this.postTopic]=!1,i["b"].instance.error("error_login_first"),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,o["a"].instance.topicSubscription({topic:this.postTopic,subscribe:this.data[this.postTopic]?"Y":"N"})];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),i["b"].instance.error(t),[3,4];case 4:return[2]}}))}))},Object(a["b"])([Object(c["b"])({default:"defaultTopic"})],e.prototype,"topic",void 0),Object(a["b"])([Object(c["b"])({default:""})],e.prototype,"rawTopic",void 0),Object(a["b"])([Object(c["b"])({default:""})],e.prototype,"title",void 0),Object(a["b"])([Object(c["b"])({default:!1})],e.prototype,"subscribedByDefault",void 0),e=Object(a["b"])([Object(c["a"])({})],e),e}(c["c"]),l=u,p=l,b=s("2877"),d=Object(b["a"])(p,r,n,!1,null,null,null);e["a"]=d.exports},c24e:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"forum-list",attrs:{"data-cy":"post-list-page"}},[t.showBanners?s("AdvertisementSquareBannerList",{staticClass:"mb-2",attrs:{banners:t.app.getBannersBy("square")}}):t._e(),t.showBanners?s("AdvertisementLineBanner",{staticClass:"mb-2 border p-1",attrs:{banners:t.app.getBannersBy("line"),rotationInterval:t.app.bannerRorationInterval}}):t._e(),s("div",{staticClass:"row fs-sm align-items-center"},[s("div",{staticClass:"col-6 d-flex align-items-center"},[s("div",[t._v(t._s(t.$store.state.currentCafe.countryCode))]),t.forum.searchOptions.categoryId?s("div",{staticClass:"ml-2 bold"},[t._v(" "+t._s(t._f("t")(t.forum.searchOptions.categoryId))+" ")]):t._e(),s("div",{staticClass:"ml-2 fs-sm"},[t._v(t._s(t._f("t")("no_of_posts"))+": "+t._s(t.app.numberWithCommas(t.total)))])]),s("div",{staticClass:"col-6 d-flex align-items-center justify-content-end"},[t.forum.searchOptions.categoryId?s("PushNotificationIcon",{attrs:{topic:t.forum.searchOptions.categoryId}}):t._e(),s("router-link",{staticClass:"btn btn-link fs-md",attrs:{"data-cy":"post-create-button",to:t.createLink}},[t._v(" "+t._s(t._f("t")("post_create"))+" ")])],1)]),t.category.subcategories?s("div",{staticClass:"d-flex ml-1 fs-sm"},t._l(t.category.subcategoriesArray,(function(e,r){return s("router-link",{key:e,staticClass:"d-flex align-items-center py-1",attrs:{to:t.subcategoryUrl(e)}},[r?s("span",{staticClass:"px-1 grey"},[t._v("•")]):t._e(),s("span",{staticClass:"px-1"},[t._v(t._s(e))])])})),1):t._e(),0==t.forum.loading?s("div",{staticClass:"mt-3"},[s("hr",{staticClass:"slim-hr"}),t._l(t.posts,(function(e){return s("section",{key:e.idx},[s("article",{staticClass:"d-flex align-items-center"},[s("ForumUserAvatar",{staticClass:"pointer",attrs:{parent:e}}),s("router-link",{staticClass:"flex-grow-1 ml-3 py-2 py-lg-3 text-truncate",attrs:{to:t.viewUrl(e)}},[s("section",[s("div",{staticClass:"d-flex align-items-center"},[s("h1",{staticClass:"title text-truncate"},[t._v(" "+t._s(t._f("t")(e.title||"no_title"))+" ")]),s("div",{staticClass:"d-flex align-items-top ml-1 mr-3"},[e.noOfComments?s("b-badge",{staticClass:"fs-xs",attrs:{variant:"light"}},[t._v(" "+t._s(e.noOfComments)+" ")]):t._e()],1),s("div",{staticClass:"d-none d-lg-block ml-auto fs-sm"},[t._v(t._s(e.shortDate))])]),s("div",{staticClass:"d-lg-none fs-xs"},[t._v(" "+t._s(e.user.displayName)+" Lv. "+t._s(e.user.level)+" "+t._s(e.shortDate)+" 조회: "+t._s(e.noOfViews)+" ")]),s("div",{staticClass:"d-flex"},[e.comments.length?s("div",{staticClass:"mt-lg-1 italic grey fs-xs"},[t._v(" "+t._s(e.comments[0].user.displayName)+': "'+t._s(e.comments[0].content)+'" ')]):s("div",{staticClass:"mt-lg-1 italic grey fs-xs text-truncate"},[t._v(t._s(e.content))]),s("div",{staticClass:"d-none d-lg-block ml-auto fs-sm"},[t._v(t._s(e.noOfViews))])])]),s("section",{staticClass:"date-view d-none d-lg-block ml-auto text-right"})]),s("div",{staticClass:"user d-none d-lg-block pointer",attrs:{id:"bp"+e.idx,tabindex:"0"}},[s("div",{staticClass:"name text-truncate"},[t._v(t._s(e.user.displayName))]),s("div",{staticClass:"level"},[t._v("Lv. "+t._s(e.user.level))]),s("b-popover",{ref:"popover",refInFor:!0,attrs:{placement:"bottomright",target:"bp"+e.idx,triggers:"click blur"}},[s("UserMenu",{attrs:{user:e.user}})],1)],1)],1),s("hr",{staticClass:"slim-hr"})])}))],2):t._e(),t.forum.posts.length||t.forum.loading?t._e():s("div",{staticClass:"mt-3 p-2 text-center"},[t._v(" "+t._s(t._f("t")("no_posts"))+" ")]),t.forum.loading?s("div",{staticClass:"p-3 text-center rounded"},[s("b-spinner",{staticClass:"mx-2",attrs:{small:"",type:"grow",variant:"info"}}),t._v(" "+t._s(t._f("t")("loading_post"))+" ")],1):t._e(),t.posts.length&&t.totalNoOfPages?s("div",{staticClass:"d-flex mt-3 justify-content-center w-100"},[s("div",{staticClass:"overflow-auto"},[s("b-pagination-nav",{attrs:{"link-gen":t.pageLinkGenerator,"number-of-pages":t.totalNoOfPages,"use-router":""},on:{change:t.onPageChanged},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]):t._e()],1)},n=[],a=(s("d3b7"),s("caad"),s("2532"),s("ac1f"),s("841c"),s("9ab4")),o=s("d68b"),i=s("1b40"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.banners.length?s("div",{staticClass:"row no-gutters"},[s("AdvertisementSquareBanner",{staticClass:"col-3 pr-1",attrs:{banner:t.banners[0]}}),s("AdvertisementSquareBanner",{staticClass:"col-3 px-1",attrs:{banner:t.banners[1]}}),s("AdvertisementSquareBanner",{staticClass:"col-3 px-1",attrs:{banner:t.banners[2]}}),s("AdvertisementSquareBanner",{staticClass:"col-3 pl-1",attrs:{banner:t.banners[3]}})],1):t._e()},u=[],l=s("2b0e"),p=s("5709"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.banner?s("div",{staticClass:"banner square pointer",on:{click:function(e){return t.onClick(t.banner)}}},[s("img",{staticClass:"w-100 h-100",attrs:{src:t.banner.bannerUrl}})]):t._e()},d=[],f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["c"])(e,t),e.prototype.onClick=function(){p["a"].instance.openAdvertisement(this.banner)},Object(a["b"])([Object(i["b"])()],e.prototype,"banner",void 0),e=Object(a["b"])([Object(i["a"])({})],e),e}(l["default"]),h=f,g=h,m=s("2877"),y=Object(m["a"])(g,b,d,!1,null,null,null),v=y.exports,C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["c"])(e,t),e.prototype.onClick=function(t){p["a"].instance.openAdvertisement(t)},Object(a["b"])([Object(i["b"])({default:function(){return[]}})],e.prototype,"banners",void 0),e=Object(a["b"])([Object(i["a"])({components:{AdvertisementSquareBanner:v}})],e),e}(l["default"]),_=C,O=_,j=Object(m["a"])(O,c,u,!1,null,null,null),x=j.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.currentBanner?s("div",{staticClass:"banner line pointer row no-gutters",on:{click:t.onClick}},[s("div",{staticClass:"col-2 p-0 image-holder"},[s("img",{attrs:{src:t.currentBanner.bannerUrl}})]),s("div",{staticClass:"col-10 title"},[t._v(" "+t._s(t.currentBanner.title)+" ")])]):t._e()},w=[],k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.index=0,e}return Object(a["c"])(e,t),e.prototype.mounted=function(){this.rotate()},Object.defineProperty(e.prototype,"currentBanner",{get:function(){return this.banners[this.index%this.banners.length]},enumerable:!1,configurable:!0}),e.prototype.rotate=function(){var t=this;setInterval((function(){return t.index++}),this.rotationInterval)},e.prototype.onClick=function(){p["a"].instance.openAdvertisement(this.currentBanner)},Object(a["b"])([Object(i["b"])({default:function(){return[]}})],e.prototype,"banners",void 0),Object(a["b"])([Object(i["b"])({default:9e3})],e.prototype,"rotationInterval",void 0),e=Object(a["b"])([Object(i["a"])({})],e),e}(l["default"]),I=k,B=I,T=Object(m["a"])(B,P,w,!1,null,null,null),A=T.exports,U=s("a51d"),q=s("3fdf"),N=s("20d6"),$=s("a153"),L=s("f873"),S=s("466c"),E=s("9f3a"),D=s("0613"),F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.app=o["a"].instance,e.api=E["a"].instance,e.forum=new q["c"],e.category=new S["b"],e.total=0,e.totalNoOfPages=0,e.currentPage=1,e}return Object(a["c"])(e,t),e.prototype.mounted=function(){return Object(a["a"])(this,void 0,Promise,(function(){return Object(a["d"])(this,(function(t){return this.init(),this.initPostCount(),this.loadPosts(),this.initCategoryBanners(),[2]}))}))},e.prototype.init=function(){return Object(a["a"])(this,void 0,Promise,(function(){var t,e,s;return Object(a["d"])(this,(function(r){switch(r.label){case 0:this.forum.limit=20,this.forum.categoryId=this.categoryId,t=this.$route.params.userIdx,t&&(this.forum.userIdx=parseInt(t)),this.forum.comments=1,this.forum.countryCode=D["a"].state.currentCafe.countryCode,this.$route.query.page?(this.currentPage=this.routePageNo,this.forum.page=this.currentPage):(this.currentPage=1,this.forum.page=1),this.subCategory&&(this.forum.subCategory=this.subCategory),r.label=1;case 1:return r.trys.push([1,3,,4]),e=this,[4,this.api.categoryGet(this.categoryId)];case 2:return e.category=r.sent(),[3,4];case 3:return s=r.sent(),this.app.error(s),[3,4];case 4:return[2]}}))}))},Object.defineProperty(e.prototype,"routePageNo",{get:function(){return this.$route.query.page?parseInt(this.$route.query.page):1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"categoryId",{get:function(){return this.post.idx?this.post.categoryId:this.$route.params.categoryId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subCategory",{get:function(){return this.$route.query.sc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posts",{get:function(){return this.forum.posts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showBanners",{get:function(){var t;return null===(t=this.$store.state.advertisementSettings.categoryArray)||void 0===t?void 0:t.includes(this.categoryId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"createLink",{get:function(){return this.app.postCreateUrl({categoryId:this.categoryId,subCategory:this.subCategory,pageNo:this.currentPage})},enumerable:!1,configurable:!0}),e.prototype.pageLinkGenerator=function(t){return this.app.postListUrl({categoryId:this.categoryId,subCategory:this.subCategory,pageNo:t})},e.prototype.onPageChanged=function(t){this.forum.page=t,this.loadPosts()},e.prototype.initCategoryBanners=function(){return Object(a["a"])(this,void 0,Promise,(function(){var t;return Object(a["d"])(this,(function(e){switch(e.label){case 0:if(!this.showBanners)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),[4,this.app.loadBanners("square")];case 2:return e.sent(),[4,this.app.loadBanners("line")];case 3:return e.sent(),[3,5];case 4:return t=e.sent(),console.log("initCategoryBanners",t),[3,5];case 5:return[2]}}))}))},e.prototype.initPostCount=function(){return Object(a["a"])(this,void 0,Promise,(function(){var t,e;return Object(a["d"])(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=this,[4,this.app.api.postCount(this.forum.searchOptions)];case 1:return t.total=s.sent(),this.totalNoOfPages=Math.ceil(this.total/this.forum.limit),[3,3];case 2:return e=s.sent(),e==N["b"].category_not_exists?console.log("@ignore category not exists error on counting no of posts."):this.app.error(e),[3,3];case 3:return[2]}}))}))},e.prototype.onQueryChange=function(){this.forum.subCategory=this.subCategory,this.initPostCount(),this.loadPosts()},e.prototype.loadPosts=function(){return Object(a["a"])(this,void 0,Promise,(function(){var t,e;return Object(a["d"])(this,(function(s){switch(s.label){case 0:if(this.forum.canLoad)return[2];this.forum.loading=!0,s.label=1;case 1:return s.trys.push([1,3,,4]),t=this.forum,[4,this.app.api.latestPosts(this.forum.searchOptions)];case 2:return t.posts=s.sent(),[3,4];case 3:return e=s.sent(),this.app.error(e),[3,4];case 4:return this.forum.endLoad(),[2]}}))}))},e.prototype.viewUrl=function(t){return(t.relativeUrl||"/"+t.idx)+location.search},e.prototype.subcategoryUrl=function(t){return this.app.postListUrl({categoryId:this.categoryId,subCategory:t,pageNo:this.currentPage})},Object(a["b"])([Object(i["b"])({default:function(){return new q["d"]}})],e.prototype,"post",void 0),Object(a["b"])([Object(i["d"])("$route.query.sc")],e.prototype,"onQueryChange",null),e=Object(a["b"])([Object(i["a"])({components:{AdvertisementSquareBannerList:x,AdvertisementLineBanner:A,PushNotificationIcon:U["a"],ForumUserAvatar:$["a"],UserMenu:L["a"]}})],e),e}(i["c"]),G=F,M=G,J=(s("c289"),Object(m["a"])(M,r,n,!1,null,null,null));e["default"]=J.exports},c289:function(t,e,s){"use strict";s("0e25")}}]);
//# sourceMappingURL=chunk-97ebda12.2f0c0560.js.map