(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a9827dc0"],{"25f0":function(t,e,n){"use strict";var s=n("6eeb"),o=n("825a"),a=n("d039"),i=n("ad6d"),r="toString",c=RegExp.prototype,p=c[r],l=a((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),m=p.name!=r;(l||m)&&s(RegExp.prototype,r,(function(){var t=o(this),e=String(t.source),n=t.flags,s=String(void 0===n&&t instanceof RegExp&&!("flags"in c)?i.call(t):n);return"/"+e+"/"+s}),{unsafe:!0})},"2c67":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"post-view-page"},[t.loading?n("div",[n("h1",[t._v("Loading...")]),n("div",{staticClass:"m-5 alert alert-danger"},[t._v(" Please wait while loading the post ... ")])]):t._e(),!t.loading&&t.post?n("div",[n("post-view-component",{attrs:{post:t.post},on:{"post-deleted":t.onPostDeleted}})],1):t._e()])},o=[],a=n("1da1"),i=n("d4ec"),r=n("bee2"),c=n("262e"),p=n("2caf"),l=(n("96cf"),n("9ab4")),m=n("2b0e"),u=n("2fe1"),d=n("aeda"),b=n("d68b"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"post-view px-2 py-4"},[n("h3",[t._v(t._s(t.post.title))]),n("div",{staticClass:"d-flex"},[n("b-avatar",{attrs:{src:t.post.user.photoUrl,size:"3em"}}),n("div",{staticClass:"ml-2"},[n("strong",[t._v("By "+t._s(t.post.user.displayName))]),n("post-meta-component",{attrs:{post:t.post}})],1)],1),n("div",{staticClass:"mt-3 p-2 rounded",staticStyle:{"background-color":"#f1f1f1"}},[t._v(" "+t._s(t.post.content)+" ")]),n("hr",{staticClass:"my-3"}),n("div",{staticClass:"d-flex"},[n("vote-buttons-component",{attrs:{parent:t.post}}),n("span",{staticClass:"flex-grow-1"}),t.app.api.isMine(t.post)?n("mine-buttons-component",{attrs:{parent:t.post},on:{"on-click-edit":function(e){return t.onClickEdit()},"on-click-delete":function(e){return t.onClickDelete(t.post.idx)}}}):t._e()],1),n("comment-form-component",{staticClass:"mt-2",attrs:{parent:t.post,root:t.post}}),n("div",{staticClass:"comments"},t._l(t.post.comments,(function(e){return n("div",{key:e.idx,staticClass:"mt-2",style:{"margin-left":8*e.depth+"px"}},[n("comment-view-component",{attrs:{post:t.post,comment:e}})],1)})),0)],1)},h=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"comment-form p-2 d-flex",on:{submit:function(e){return e.preventDefault(),t.onCommentSubmit.apply(null,arguments)}}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.content,expression:"form.content"}],staticClass:"w-100 form-control",staticStyle:{height:"40px"},attrs:{type:"text",name:"content",placeholder:"Comment .."},domProps:{value:t.form.content},on:{input:function(e){e.target.composing||t.$set(t.form,"content",e.target.value)}}}),t.submitted?t._e():n("div",{staticClass:"ml-2 d-flex"},[t.comment||t.parent.idx!=t.root.idx?n("button",{staticClass:"btn btn-sm btn-danger w-100",attrs:{type:"button"},on:{click:t.onClickCancel}},[t._v(" Cancel ")]):t._e(),n("button",{staticClass:"w-100 ml-2 btn btn-sm btn-success",attrs:{type:"submit"}},[t._v(" Submit ")]),t.submitted?n("b-spinner",{staticClass:"mx-2",attrs:{type:"grow",variant:"success"}}):t._e()],1)])},C=[],x=(n("d3b7"),n("25f0"),function(t){Object(c["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.form=new d["a"],t.app=b["a"].instance,t.submitted=!1,t}return Object(r["a"])(n,[{key:"mounted",value:function(){this.comment&&(this.form.idx=this.comment.idx,this.form.content=this.comment.content)}},{key:"onCommentSubmit",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.submitted){t.next=2;break}return t.abrupt("return");case 2:return this.submitted=!0,this.form.rootIdx=this.root.idx,this.form.parentIdx=this.comment?this.comment.parentIdx:this.parent.idx,t.prev=5,t.next=8,this.app.api.commentEdit(this.form);case 8:e=t.sent,this.comment?(Object.assign(this.comment,e),this.comment.inEdit=!1):(e.depth=(this.parent.depth?+this.parent.depth+1:1).toString(),this.root.insertComment(e)),this.form.content="",this.submitted=!1,t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](5),this.app.error(t.t0),this.submitted=!1;case 18:case"end":return t.stop()}}),t,this,[[5,14]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"onClickCancel",value:function(){this.comment?this.comment.inEdit=!1:this.parent.inReply=!1}}]),n}(m["a"]));x=Object(l["a"])([Object(u["a"])({props:["root","parent","comment"]})],x);var _=x,g=_,k=n("2877"),O=Object(k["a"])(g,f,C,!1,null,null,null),j=O.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"comment-view p-3 rounded",staticStyle:{"background-color":"#f0f0f0"}},[n("div",{staticClass:"d-flex"},[n("b-avatar",{attrs:{src:t.comment.user.photoUrl,size:"2.8em"}}),n("div",{staticClass:"ml-2 text-truncate"},[n("div",{staticClass:"font-weight-bold"},[t._v(t._s(t.comment.user.displayName))]),n("div",[t._v("No. "+t._s(t.comment.idx)+" • "+t._s(t.comment.shortDate))])])],1),n("div",{staticClass:"mt-2"},[t._v(t._s(t.comment.content))]),t.comment.inEdit?n("comment-form-component",{attrs:{root:t.post,comment:t.comment}}):t._e(),n("hr",{staticClass:"my-2"}),t.comment.inEdit?t._e():n("div",{staticClass:"mt-2 d-flex"},[n("div",{staticClass:"d-flex"},[n("button",{staticClass:"mr-2 btn btn-sm",on:{click:function(e){t.comment.inReply=!t.comment.inReply}}},[t._v(" Reply ")]),n("vote-buttons-component",{attrs:{parent:t.comment}})],1),n("span",{staticClass:"flex-grow-1"}),t.app.api.isMine(t.comment)?n("mine-buttons-component",{attrs:{parent:t.comment},on:{"on-click-edit":function(e){t.comment.inEdit=!t.comment.inEdit},"on-click-delete":t.onClickDelete}}):t._e()],1)],1),t.comment.inReply?n("comment-form-component",{attrs:{root:t.post,parent:t.comment}}):t._e()],1)},w=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"},[n("button",{staticClass:"btn btn-sm",staticStyle:{color:"green"},on:{click:function(e){return t.onClickVote("Y")}}},[t._v(" Like "),t.parent.Y?n("span",{staticClass:"badge badge-pill badge-success"},[t._v(" "+t._s(t.parent.Y)+" ")]):t._e()]),n("button",{staticClass:"ml-2 btn btn-sm",staticStyle:{color:"red"},on:{click:function(e){return t.onClickVote("N")}}},[t._v(" Dislike "),t.parent.N?n("span",{staticClass:"badge badge-pill badge-danger"},[t._v(" "+t._s(t.parent.N)+" ")]):t._e()])])},R=[],D=function(t){Object(c["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.app=b["a"].instance,t}return Object(r["a"])(n,[{key:"onClickVote",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,this.app.api.vote({idx:this.parent.idx,choice:e});case 4:n=t.sent,Object.assign(this.parent,{Y:n["Y"],N:n["N"]}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),this.app.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}()}]),n}(m["a"]);D=Object(l["a"])([Object(u["a"])({props:["parent"]})],D);var N=D,$=N,S=Object(k["a"])($,E,R,!1,null,null,null),V=S.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mine-buttons"},[n("button",{staticClass:"btn btn-sm",attrs:{id:"mine-button-popover-"+t.parent.idx}},[n("b-icon",{attrs:{icon:"three-dots-vertical",variant:"info"}})],1),n("b-popover",{ref:"popover",attrs:{placement:"bottomleft",target:"mine-button-popover-"+t.parent.idx,triggers:"click blur"}},[n("button",{staticClass:"btn btn-sm btn-success",on:{click:function(e){return t.onClickEmit("on-click-edit")}}},[t._v(" Edit ")]),n("button",{staticClass:"ml-2 btn btn-sm btn-danger",on:{click:function(e){return t.onClickEmit("on-click-delete")}}},[t._v(" Delete ")])])],1)},B=[],M=function(t){Object(c["a"])(n,t);var e=Object(p["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(r["a"])(n,[{key:"onClickEmit",value:function(t){this.$emit(t),this.$root.$emit("bv::hide::popover","mine-button-popover-"+this.parent.idx)}}]),n}(m["a"]);M=Object(l["a"])([Object(u["a"])({props:["parent"]})],M);var I=M,Y=I,z=Object(k["a"])(Y,P,B,!1,null,null,null),A=z.exports,F=function(t){Object(c["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.app=b["a"].instance,t}return Object(r["a"])(n,[{key:"onClickDelete",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=confirm("Are you sure you want to delete this comment? [IDX]: ".concat(this.post.idx)),e){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,this.app.api.commentDelete(null===(n=this.comment)||void 0===n?void 0:n.idx);case 6:this.post.deleteComment(this.comment.idx),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](3),this.app.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[3,9]])})));function e(){return t.apply(this,arguments)}return e}()}]),n}(m["a"]);F=Object(l["a"])([Object(u["a"])({props:["post","comment"],components:{CommentFormComponent:j,VoteButtonsComponent:V,MineButtonsComponent:A}})],F);var J=F,L=J,U=Object(k["a"])(L,y,w,!1,null,null,null),X=U.exports,G=n("9fac"),q=function(t){Object(c["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.app=b["a"].instance,t}return Object(r["a"])(n,[{key:"onClickDelete",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=confirm("Are you sure you want to delete this post? [IDX]: ".concat(this.post.idx)),e){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,this.app.api.postDelete(null===(n=this.post)||void 0===n?void 0:n.idx);case 6:this.$emit("post-deleted",null===(s=this.post)||void 0===s?void 0:s.idx),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](3),this.app.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[3,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"onClickEdit",value:function(){console.log("onEdit","/edit/".concat(this.post.idx)),this.$router.push("/edit/".concat(this.post.idx)).catch((function(){return null}))}}]),n}(m["a"]);q=Object(l["a"])([Object(u["a"])({props:["post"],components:{CommentFormComponent:j,CommentViewComponent:X,PostMetaComponent:G["a"],VoteButtonsComponent:V,MineButtonsComponent:A}})],q);var H=q,K=H,Q=Object(k["a"])(K,v,h,!1,null,null,null),T=Q.exports,W=function(t){Object(c["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.loading=!1,t.post=new d["d"],t.app=b["a"].instance,t}return Object(r["a"])(n,[{key:"mounted",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.app.api.postGet({path:location.href});case 4:e=t.sent,this.loading=!1,this.post=this.post.fromMap(e),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),this.loading=!1,this.app.error(t.t0);case 13:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"onPostDeleted",value:function(t){console.log("Post ".concat(t," deleted. todo: move back to list."))}}]),n}(m["a"]);W=Object(l["a"])([Object(u["a"])({components:{PostViewComponent:T}})],W);var Z=W,tt=Z,et=Object(k["a"])(tt,s,o,!1,null,null,null);e["default"]=et.exports},"9fac":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-meta text-truncate"},[t.showName?n("span",[t._v("By "+t._s(t.post.user.displayName))]):t._e(),t.showName?t._e():n("span",[t._v("No. "+t._s(t.post.idx))]),t.post.noOfComments?n("span",{staticClass:"text-muted"},[t._v(" • Comments "+t._s(t.post.noOfComments)+" ")]):t._e(),t.post.noOfViews?n("span",{staticClass:"text-muted"},[t._v(" • Views "+t._s(t.post.noOfViews)+" ")]):t._e(),t.post.shortDate?n("span",{staticClass:"text-muted"},[t._v(" • Date: "+t._s(t.post.shortDate)+" ")]):t._e()])},o=[],a=n("d4ec"),i=n("262e"),r=n("2caf"),c=n("9ab4"),p=n("2b0e"),l=n("2fe1"),m=function(t){Object(i["a"])(n,t);var e=Object(r["a"])(n);function n(){return Object(a["a"])(this,n),e.apply(this,arguments)}return n}(p["a"]);m=Object(c["a"])([Object(l["a"])({props:["post","showName"]})],m);var u=m,d=u,b=n("2877"),v=Object(b["a"])(d,s,o,!1,null,null,null);e["a"]=v.exports}}]);
//# sourceMappingURL=chunk-a9827dc0.4f4a8c28.js.map