(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99768f36"],{2297:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pr-2 position-relative overflow-hidden"},[a("b-icon",{style:{width:t.defaultSize+"px",height:t.defaultSize+"px"},attrs:{icon:"camera-fill"}}),a("input",{staticClass:"h-100 top left position-absolute opacity-0",attrs:{type:"file"},on:{change:t.onFileChange}})],1)},s=[],n=a("d4ec"),r=a("bee2"),o=a("262e"),l=a("2caf"),c=a("9ab4"),u=a("d68b"),p=a("2b0e"),f=a("2fe1"),d=function(t){Object(o["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.defaultSize=35,t.app=u["a"].instance,t}return Object(r["a"])(a,[{key:"mounted",value:function(){this.size&&(this.defaultSize=this.size)}},{key:"onFileChange",value:function(t){var e,a;if(this.app.notLoggedIn)this.app.error("error_login_first");else if(null!==t.target.files&&0!==(null===(e=t.target)||void 0===e||null===(a=e.files)||void 0===a?void 0:a.length)){var i=t.target.files[0];this.app.api.fileUpload(i,{},this.onUploaded,this.app.error,this.onProgress)}}},{key:"onUploaded",value:function(t){this.$emit("success",t)}},{key:"onProgress",value:function(t){this.$emit("progress",t)}}]),a}(p["a"]);d=Object(c["a"])([Object(f["a"])({props:["parent","size"]})],d);var h=d,m=h,v=a("2877"),b=Object(v["a"])(m,i,s,!1,null,null,null);e["a"]=b.exports},"419e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.app.notLoggedIn?a("div",{staticClass:"p-2 text-center rounded bg-secondary"},[a("h3",[t._v("Login First")])]):t._e()},s=[],n=a("d4ec"),r=a("262e"),o=a("2caf"),l=a("d68b"),c=a("2b0e"),u=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.app=l["a"].instance,t}return a}(c["a"]),p=u,f=a("2877"),d=Object(f["a"])(p,i,s,!1,null,null,null);e["a"]=d.exports},"48d4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"post-edit-page p-2"},[t.app.loggedIn?a("div",[t.form.categoryId?a("div",[t._v(" Category: "),a("span",{staticClass:"text-uppercase"},[t._v(" "+t._s(t.form.categoryId)+" ")])]):t._e(),a("form",{staticClass:"mt-3",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t._v(" Title "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"w-100 form-control",attrs:{type:"text",name:"title"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),t._v(" Content "),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.content,expression:"form.content"}],staticClass:"w-100 form-control",attrs:{type:"text",name:"content"},domProps:{value:t.form.content},on:{input:function(e){e.target.composing||t.$set(t.form,"content",e.target.value)}}})]),a("div",{staticClass:"d-flex align-center"},[a("upload-button",{on:{success:t.onFileUploaded,progress:function(e){t.uploadProgress=e}}}),a("span",{staticClass:"flex-grow-1 mt-2 mr-2"},[t.uploadProgress?a("b-progress",{staticClass:"mb-3",attrs:{value:t.uploadProgress,max:"100"}}):t._e()],1),t.submitted?t._e():a("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(" Submit ")]),t.submitted?a("b-spinner",{staticClass:"mx-2",attrs:{type:"grow",variant:"success"}}):t._e()],1),a("file-display",{attrs:{files:t.uploadedFiles,showDelete:!0},on:{"file-deleted":t.onFileDeleted}})],1)]):t._e(),a("login-first")],1)},s=[],n=a("1da1"),r=a("d4ec"),o=a("bee2"),l=a("262e"),c=a("2caf"),u=(a("96cf"),a("a15b"),a("d81d"),a("c740"),a("a434"),a("9ab4")),p=a("2b0e"),f=a("2fe1"),d=a("d68b"),h=a("aeda"),m=a("419e"),v=a("2297"),b=a("ae56"),g=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.form=new h["e"],t.app=d["a"].instance,t.submitted=!1,t.uploadProgress=0,t.uploadedFiles=[],t}return Object(o["a"])(a,[{key:"loadPost",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.app.api.postGet({idx:this.form.idx});case 2:e=t.sent,this.form.idx=e.idx,this.form.title=e.title,this.form.content=e.content,this.form.files=e.files.map((function(t){return"".concat(t.idx)})).join(","),this.uploadedFiles=e.files;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){var t=this.$route.params.idOrCategory;isNaN(parseInt(t))?this.form.categoryId=t:(this.form.idx=t,this.loadPost())}},{key:"onSubmit",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitted=!0,t.prev=1,t.next=4,this.app.api.postEdit(this.form);case 4:e=t.sent,this.$router.push("/".concat(e.path)).catch((function(){return null})),this.submitted=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),this.app.error(t.t0),this.submitted=!1;case 13:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"onFileUploaded",value:function(t){this.form.files=this.app.addByComma(this.form.files,t.idx),this.uploadedFiles.push(t),this.uploadProgress=0}},{key:"onFileDeleted",value:function(t){this.form.files=this.app.deleteByComma(this.form.files,t);var e=this.uploadedFiles.findIndex((function(e){return e.idx==t}));this.uploadedFiles.splice(e,1)}}]),a}(p["a"]);g=Object(u["a"])([Object(f["a"])({components:{LoginFirst:m["a"],UploadButton:v["a"],FileDisplay:b["a"]}})],g);var y=g,x=y,w=a("2877"),j=Object(w["a"])(x,i,s,!1,null,null,null);e["default"]=j.exports},ae56:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"file-display grid"},[a("div",{staticClass:"row"},t._l(t.files,(function(e){return a("div",{key:e.idx,staticClass:"position-relative p-1 col-3",staticStyle:{height:"150px"}},[t.showDelete?a("b-icon",{staticClass:"position-absolute top-35 left-35 fs-lg",attrs:{icon:"x-circle-fill",variant:"danger"},on:{click:function(a){return t.onClickDelete(e.idx)}}}):t._e(),a("img",{staticClass:"w-100 h-100",attrs:{src:e.url,alt:e.name}})],1)})),0)])},s=[],n=a("1da1"),r=a("d4ec"),o=a("bee2"),l=a("262e"),c=a("2caf"),u=(a("96cf"),a("9ab4")),p=a("d68b"),f=a("2b0e"),d=a("2fe1"),h=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.app=p["a"].instance,t}return Object(o["a"])(a,[{key:"onClickDelete",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=confirm("Are you sure you want to delete this file?"),a){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,this.app.api.fileDelete(e);case 6:this.$emit("file-deleted",e),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](3),this.app.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[3,9]])})));function e(e){return t.apply(this,arguments)}return e}()}]),a}(f["a"]);h=Object(u["a"])([Object(d["a"])({props:["files","showDelete"]})],h);var m=h,v=m,b=a("2877"),g=Object(b["a"])(v,i,s,!1,null,null,null);e["a"]=g.exports}}]);
//# sourceMappingURL=chunk-99768f36.475b7ac7.js.map