(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f5cf326a"],{"0738":function(t,e,s){t.exports=s.p+"img/fas-trash.7677c3c9.svg"},"450c":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pr-2 position-relative overflow-hidden pointer"},[i("img",{staticClass:"pointer",style:{width:t.defaultSize+"px",height:t.defaultSize+"px"},attrs:{src:s("872d")}}),i("input",{staticClass:"h-100 top right position-absolute fs-lg opacity-0 pointer",attrs:{type:"file"},on:{change:t.onFileChange}})])},n=[],r=(s("d3b7"),s("9ab4")),o=s("2b0e"),a=s("2fe1"),l=s("9f3a"),c=s("f6b1"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultSize=35,e.api=l["a"].instance,e}return Object(r["c"])(e,t),e.prototype.mounted=function(){this.size&&(this.defaultSize=this.size)},e.prototype.onFileChange=function(t){var e,s;return Object(r["a"])(this,void 0,Promise,(function(){var i,n,o;return Object(r["d"])(this,(function(r){switch(r.label){case 0:if(!this.api._user.loggedIn)return c["b"].instance.error("error_login_first"),[2];if(null===t.target.files||0===(null===(s=null===(e=t.target)||void 0===e?void 0:e.files)||void 0===s?void 0:s.length))return[2];i=t.target.files[0],r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.api.fileUpload(i,{},this.onProgress)];case 2:return n=r.sent(),this.$emit("success",n),[3,4];case 3:return o=r.sent(),c["b"].instance.error(o),[3,4];case 4:return[2]}}))}))},e.prototype.onProgress=function(t){this.$emit("progress",t)},e=Object(r["b"])([Object(a["b"])({props:["size"]})],e),e}(o["default"]),f=u,p=f,d=s("2877"),h=Object(d["a"])(p,i,n,!1,null,null,null);e["a"]=h.exports},"48d4":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"post-edit-page"},[s("PostEdit")],1)},n=[],r=s("9ab4"),o=s("2b0e"),a=s("2fe1"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"post"},[t.api._user.loggedIn?s("div",[t.form.categoryId?s("div",[t._v(" "+t._s(t._f("t")("category"))+" "),s("span",{staticClass:"text-uppercase"},[t._v(" "+t._s(t.form.categoryId)+" ")])]):t._e(),s("form",{staticClass:"mt-3",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t._v(" "+t._s(t._f("t")("title"))+" "),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"w-100 form-control",attrs:{type:"text",name:"title"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),t._v(" "+t._s(t._f("t")("content"))+" "),s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.content,expression:"form.content"}],staticClass:"w-100 form-control",attrs:{type:"text",name:"content"},domProps:{value:t.form.content},on:{input:function(e){e.target.composing||t.$set(t.form,"content",e.target.value)}}})]),s("div",{staticClass:"d-flex align-center"},[s("upload-button",{on:{success:t.onFileUploaded,progress:function(e){t.uploadProgress=e}}}),s("span",{staticClass:"flex-grow-1 mt-2 mr-2"},[t.uploadProgress?s("b-progress",{staticClass:"mb-3",attrs:{value:t.uploadProgress,max:"100"}}):t._e()],1),t.submitted?t._e():s("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(" "+t._s(t._f("t")("submit"))+" ")]),t.submitted?s("b-spinner",{staticClass:"mx-2",attrs:{type:"grow",variant:"success"}}):t._e()],1),s("file-display",{attrs:{files:t.form.files,showDelete:!0},on:{"file-deleted":t.onFileDeleted}})],1)]):t._e(),t.loading?t._e():s("login-first"),t.loading?s("div",{staticClass:"p-3 text-center rounded"},[s("b-spinner",{staticClass:"mx-2",attrs:{small:"",type:"grow",variant:"info"}}),t._v(" Please wait while loading the post ... ")],1):t._e()],1)},c=[],u=(s("d3b7"),s("ac1f"),s("841c"),s("9f3a")),f=s("d28a"),p=s("d661"),d=s("f6b1"),h=s("450c"),b=s("6674"),m=s("8857"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.form=new f["h"],e.api=u["a"].instance,e.loading=!1,e.submitted=!1,e.uploadProgress=0,e}return Object(r["c"])(e,t),e.prototype.loadPost=function(){return Object(r["a"])(this,void 0,Promise,(function(){var t,e;return Object(r["d"])(this,(function(s){switch(s.label){case 0:this.loading=!0,s.label=1;case 1:return s.trys.push([1,3,,4]),t=this,[4,this.api.postGet({idx:this.form.idx})];case 2:return t.form=s.sent(),this.loading=!1,[3,4];case 3:return e=s.sent(),d["b"].instance.error(e),this.loading=!1,[3,4];case 4:return[2]}}))}))},e.prototype.mounted=function(){var t=this.$route.params.idxOrCategory;isNaN(parseInt(t))?(this.form.categoryId=t,this.$route.query.sc&&(this.form.subcategory=this.$route.query.sc),console.log(this.form)):(this.form.idx=parseInt(t),this.loadPost())},e.prototype.onSubmit=function(){return Object(r["a"])(this,void 0,Promise,(function(){var t,e,s;return Object(r["d"])(this,(function(i){switch(i.label){case 0:this.submitted=!0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.api.postEdit(this.form.toJson)];case 2:return t=i.sent(),e="/"+t.path+location.search,d["b"].instance.open(e),this.submitted=!1,[3,4];case 3:return s=i.sent(),d["b"].instance.error(s),this.submitted=!1,[3,4];case 4:return[2]}}))}))},e.prototype.onFileUploaded=function(t){this.form.fileIdxes=Object(p["a"])(this.form.fileIdxes,t.idx),this.form.files.push(t),this.uploadProgress=0},e.prototype.onFileDeleted=function(t){this.form.fileIdxes=Object(p["c"])(this.form.fileIdxes,t)},e=Object(r["b"])([Object(a["b"])({components:{LoginFirst:b["a"],UploadButton:h["a"],FileDisplay:m["a"]}})],e),e}(o["default"]),v=g,y=v,_=s("2877"),x=Object(_["a"])(y,l,c,!1,null,null,null),C=x.exports,O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["c"])(e,t),e=Object(r["b"])([Object(a["b"])({components:{PostEdit:C}})],e),e}(o["default"]),j=O,w=j,P=Object(_["a"])(w,i,n,!1,null,null,null);e["default"]=P.exports},6674:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.api._user.notLoggedIn?s("div",{staticClass:"p-2 text-center rounded bg-secondary"},[s("h3",[t._v("Login First")])]):t._e()},n=[],r=s("9ab4"),o=s("9f3a"),a=s("2b0e"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.api=o["a"].instance,e}return Object(r["c"])(e,t),e}(a["default"]),c=l,u=c,f=s("2877"),p=Object(f["a"])(u,i,n,!1,null,null,null);e["a"]=p.exports},"872d":function(t,e,s){t.exports=s.p+"img/camera.f2c26d4b.svg"},8857:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"file-display grid"},[i("div",{staticClass:"row"},t._l(t.files,(function(e){return i("div",{key:e.idx,staticClass:"position-relative p-1 col-3",staticStyle:{height:"150px"}},[t.showDelete?i("div",{staticClass:"icon-lg position-absolute m-2 bg-light circle-center pointer",on:{click:function(s){return t.onClickDelete(e.idx)}}},[i("img",{staticClass:"icon-md",attrs:{src:s("0738")}})]):t._e(),i("img",{staticClass:"w-100 h-100",attrs:{src:e.url,alt:e.name}})])})),0)])},n=[],r=(s("d3b7"),s("c740"),s("a434"),s("9ab4")),o=s("2b0e"),a=s("2fe1"),l=s("9f3a"),c=s("f6b1"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.api=l["a"].instance,e}return Object(r["c"])(e,t),e.prototype.onClickDelete=function(t){return Object(r["a"])(this,void 0,Promise,(function(){var e,s,i;return Object(r["d"])(this,(function(n){switch(n.label){case 0:return[4,c["b"].instance.confirm("Title","Are you sure you want to delete this file?")];case 1:if(e=n.sent(),!e)return[2];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.api.fileDelete(t)];case 3:return n.sent(),s=this.files.findIndex((function(e){return e.idx==t})),this.files.splice(s,1),this.$emit("file-deleted",t),[3,5];case 4:return i=n.sent(),c["b"].instance.error(i),[3,5];case 5:return[2]}}))}))},e=Object(r["b"])([Object(a["b"])({props:["files","showDelete"]})],e),e}(o["default"]),f=u,p=f,d=s("2877"),h=Object(d["a"])(p,i,n,!1,null,null,null);e["a"]=h.exports}}]);
//# sourceMappingURL=chunk-f5cf326a.ff21be0b.js.map