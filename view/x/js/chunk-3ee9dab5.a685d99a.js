(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ee9dab5"],{"0738":function(t,e,i){t.exports=i.p+"img/fas-trash.7677c3c9.svg"},2297:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pr-2 position-relative overflow-hidden pointer"},[s("img",{staticClass:"pointer",style:{width:t.defaultSize+"px",height:t.defaultSize+"px"},attrs:{src:i("872d")}}),s("input",{staticClass:"h-100 top right position-absolute fs-lg opacity-0 pointer",attrs:{type:"file"},on:{change:t.onFileChange}})])},n=[],r=i("9ab4"),o=i("d68b"),a=i("2b0e"),l=i("2fe1"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultSize=35,e.app=o["a"].instance,e}return Object(r["c"])(e,t),e.prototype.mounted=function(){this.size&&(this.defaultSize=this.size)},e.prototype.onFileChange=function(t){var e,i;if(this.app.notLoggedIn)this.app.error("error_login_first");else if(null!==t.target.files&&0!==(null===(i=null===(e=t.target)||void 0===e?void 0:e.files)||void 0===i?void 0:i.length)){var s=t.target.files[0];this.app.api.fileUpload(s,{},this.onUploaded,this.app.error,this.onProgress)}},e.prototype.onUploaded=function(t){this.$emit("success",t)},e.prototype.onProgress=function(t){this.$emit("progress",t)},e=Object(r["b"])([Object(l["a"])({props:["size"]})],e),e}(a["a"]),u=c,p=u,d=i("2877"),f=Object(d["a"])(p,s,n,!1,null,null,null);e["a"]=f.exports},"48d4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"post-edit-page p-2"},[t.app.loggedIn?i("div",[t.form.categoryId?i("div",[t._v(" Category: "),i("span",{staticClass:"text-uppercase"},[t._v(" "+t._s(t.form.categoryId)+" ")])]):t._e(),i("form",{staticClass:"mt-3",attrs:{"data-cy":"post-edit-form"},on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t._v(" Title "),i("div",{staticClass:"form-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"w-100 form-control",attrs:{type:"text",name:"title"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),t._v(" Content "),i("div",{staticClass:"form-group"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.content,expression:"form.content"}],staticClass:"w-100 form-control",attrs:{type:"text",name:"content"},domProps:{value:t.form.content},on:{input:function(e){e.target.composing||t.$set(t.form,"content",e.target.value)}}})]),i("div",{staticClass:"d-flex align-center"},[i("upload-button",{on:{success:t.onFileUploaded,progress:function(e){t.uploadProgress=e}}}),i("span",{staticClass:"flex-grow-1 mt-2 mr-2"},[t.uploadProgress?i("b-progress",{staticClass:"mb-3",attrs:{value:t.uploadProgress,max:"100"}}):t._e()],1),t.submitted?t._e():i("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(" Submit ")]),t.submitted?i("b-spinner",{staticClass:"mx-2",attrs:{type:"grow",variant:"success"}}):t._e()],1),i("file-display",{attrs:{files:t.uploadedFiles,showDelete:!0},on:{"file-deleted":t.onFileDeleted}})],1)]):t._e(),i("login-first")],1)},n=[],r=(i("d3b7"),i("a15b"),i("d81d"),i("9ab4")),o=i("2b0e"),a=i("2fe1"),l=i("d68b"),c=i("d28a"),u=i("6674"),p=i("2297"),d=i("8857"),f=i("d661"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.form=new c["f"],e.app=l["a"].instance,e.submitted=!1,e.uploadProgress=0,e.uploadedFiles=[],e}return Object(r["c"])(e,t),e.prototype.loadPost=function(){return Object(r["a"])(this,void 0,Promise,(function(){var t;return Object(r["d"])(this,(function(e){switch(e.label){case 0:return[4,this.app.api.postGet({idx:this.form.idx})];case 1:return t=e.sent(),this.form.idx=t.idx,this.form.title=t.title,this.form.content=t.content,this.form.files=t.files.map((function(t){return""+t.idx})).join(","),this.uploadedFiles=t.files,[2]}}))}))},e.prototype.mounted=function(){var t=this.$route.params.idOrCategory;isNaN(parseInt(t))?this.form.categoryId=t:(this.form.idx=t,this.loadPost())},e.prototype.onSubmit=function(){return Object(r["a"])(this,void 0,Promise,(function(){var t,e;return Object(r["d"])(this,(function(i){switch(i.label){case 0:this.submitted=!0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.app.api.postEdit(this.form)];case 2:return t=i.sent(),this.$router.push("/"+t.path).catch((function(){return null})),this.submitted=!1,[3,4];case 3:return e=i.sent(),this.app.error(e),this.submitted=!1,[3,4];case 4:return[2]}}))}))},e.prototype.onFileUploaded=function(t){this.form.files=Object(f["a"])(this.form.files,t.idx),this.uploadedFiles.push(t),this.uploadProgress=0},e.prototype.onFileDeleted=function(t){this.form.files=Object(f["b"])(this.form.files,t)},e=Object(r["b"])([Object(a["a"])({components:{LoginFirst:u["a"],UploadButton:p["a"],FileDisplay:d["a"]}})],e),e}(o["a"]),m=h,b=m,g=i("2877"),v=Object(g["a"])(b,s,n,!1,null,null,null);e["default"]=v.exports},6674:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.api.notLoggedIn?i("div",{staticClass:"p-2 text-center rounded bg-secondary"},[i("h3",[t._v("Login First")])]):t._e()},n=[],r=i("9ab4"),o=i("9f3a"),a=i("2b0e"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.api=o["a"].instance,e}return Object(r["c"])(e,t),e}(a["a"]),c=l,u=c,p=i("2877"),d=Object(p["a"])(u,s,n,!1,null,null,null);e["a"]=d.exports},"872d":function(t,e,i){t.exports=i.p+"img/camera.f2c26d4b.svg"},8857:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"file-display grid"},[s("div",{staticClass:"row"},t._l(t.files,(function(e){return s("div",{key:e.idx,staticClass:"position-relative p-1 col-3",staticStyle:{height:"150px"}},[t.showDelete?s("div",{staticClass:"icon-lg position-absolute m-2 bg-light circle-center pointer",on:{click:function(i){return t.onClickDelete(e.idx)}}},[s("img",{staticClass:"icon-md",attrs:{src:i("0738")}})]):t._e(),s("img",{staticClass:"w-100 h-100",attrs:{src:e.url,alt:e.name}})])})),0)])},n=[],r=(i("d3b7"),i("c740"),i("a434"),i("9ab4")),o=i("9f3a"),a=i("2b0e"),l=i("2fe1"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.api=o["a"].instance,e}return Object(r["c"])(e,t),e.prototype.onClickDelete=function(t){return Object(r["a"])(this,void 0,Promise,(function(){var e,i,s;return Object(r["d"])(this,(function(n){switch(n.label){case 0:if(e=confirm("Are you sure you want to delete this file?"),!e)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.api.fileDelete(t)];case 2:return n.sent(),i=this.files.findIndex((function(e){return e.idx==t})),this.files.splice(i,1),this.$emit("file-deleted",t),[3,4];case 3:return s=n.sent(),this.api.error(s),[3,4];case 4:return[2]}}))}))},e=Object(r["b"])([Object(l["a"])({props:["files","showDelete"]})],e),e}(a["a"]),u=c,p=u,d=i("2877"),f=Object(d["a"])(p,s,n,!1,null,null,null);e["a"]=f.exports}}]);
//# sourceMappingURL=chunk-3ee9dab5.a685d99a.js.map