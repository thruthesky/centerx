{"version":3,"sources":["webpack:///./src/views/Login.vue?cd8c","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?0a24","webpack:///./src/views/Login.vue?7b2b","webpack:///./src/assets/login/kakao.png","webpack:///./src/assets/login/naver.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","on","$event","preventDefault","onSubmit","apply","arguments","staticClass","directives","name","rawName","value","form","expression","domProps","target","composing","$set","loginWithKakao","naverApiUrl","loginWithNaver","staticRenderFns","init","client_id","naver","clientId","redirectURI","encodeURIComponent","callbackUrl","state","location","host","Promise","$app","login","error","Kakao","window","kakaoJavascriptKey","Auth","success","authObj","console","log","API","request","url","data","secure_resource","me","id","nickname","kakao_account","profile","photoUrl","profile_image_url","domain","hostname","api","kakaoLogin","user","fail","alert","err","JSON","stringify","Login","component","module","exports"],"mappings":"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","file":"js/chunk-c425edd8.cda9eec8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"data-cy\":\"login-form\"}},[_c('h1',[_vm._v(\"User Login\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"form-group\"},[_vm._v(\" Email \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.email),expression:\"form.email\"}],attrs:{\"type\":\"text\",\"name\":\"email\"},domProps:{\"value\":(_vm.form.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"email\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_vm._v(\" Password \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.password),expression:\"form.password\"}],attrs:{\"type\":\"password\",\"name\":\"password\"},domProps:{\"value\":(_vm.form.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"password\", $event.target.value)}}})]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Submit\")])]),_c('img',{staticClass:\"w-100\",attrs:{\"src\":require(\"@/assets/login/kakao.png\")},on:{\"click\":function($event){return _vm.loginWithKakao()}}}),_c('script',{attrs:{\"type\":\"application/javascript\",\"defer\":\"\",\"src\":\"/js/kakao.min.js\"}}),_c('a',{attrs:{\"href\":_vm.naverApiUrl}},[_c('img',{staticClass:\"w-100\",attrs:{\"src\":require(\"@/assets/login/naver.png\")},on:{\"click\":function($event){return _vm.loginWithNaver()}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport appConfig from \"@/service/app.config\";\nimport { KakaoUserMe, UserModel } from \"@/x-vue/interfaces/interfaces\";\n\nimport Vue from \"vue\";\nimport Component from \"vue-class-component\";\n\n// eslint-disable-next-line  @typescript-eslint/no-explicit-any\ndeclare const window: any;\n\n@Component({})\nexport default class Login extends Vue {\n  form = {};\n  init = false;\n\n  get naverApiUrl(): string {\n    const client_id = appConfig.naver.clientId;\n    const redirectURI = encodeURIComponent(appConfig.naver.callbackUrl);\n    // state 에는 사용자가 현재 접속한 도메인을 입력한다. 그래야, 다시 현재 도메인으로 돌아온다.\n    // 주의: 아래에서 location.host 로 해야지 포트 번호까지 추가된다.\n    const state = location.host;\n    return `https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=${client_id}&redirect_uri=${redirectURI}&state=${state}`;\n  }\n\n  async onSubmit(): Promise<void> {\n    // console.log(\"Login::form\", this.form);\n    try {\n      await this.$app.login(this.form);\n    } catch (e) {\n      this.$app.error(e);\n    }\n  }\n\n  loginWithKakao(): void {\n    const Kakao = window.Kakao; // Kakao SDK 객체\n    if (this.init === false) {\n      Kakao.init(appConfig.kakaoJavascriptKey); // 최초 1회만 초기화\n      this.init = true;\n    }\n    Kakao.Auth.login({\n      // Kakao 로그인\n      success: (authObj: unknown) => {\n        console.log(authObj);\n        Kakao.API.request({\n          // Kakao 회원 정보 요청\n          url: \"/v2/user/me\",\n          data: { secure_resource: true }, // 프로필 사진을 HTTPS 로 가져 옴\n          success: async (me: KakaoUserMe) => {\n            // 변수에 담아서, PHP 로 전달 할 정보\n            const data = {\n              id: me.id,\n              nickname: me.kakao_account?.profile?.nickname ?? \"\",\n              photoUrl: me.kakao_account?.profile?.profile_image_url ?? \"\",\n              domain: location.hostname,\n            };\n            console.log(\"kakaoLogin request data;\", data);\n            // Centerx API 로 회원 로그인(또는 최초 1회 회원 가입)\n            const user: UserModel = await this.$app.api.kakaoLogin(data);\n            console.log(\"kakaoLogin response data; \", user);\n          },\n          fail: (error: unknown) => {\n            alert(error);\n          },\n        });\n      },\n      fail: (err: unknown) => {\n        alert(JSON.stringify(err));\n      },\n    });\n  }\n  loginWithNaver(): void {\n    //\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=fd710c9c&\"\nimport script from \"./Login.vue?vue&type=script&lang=ts&\"\nexport * from \"./Login.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/kakao.b2df8abc.png\";","module.exports = __webpack_public_path__ + \"img/naver.d7836f6e.png\";"],"sourceRoot":""}