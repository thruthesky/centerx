(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6aa3341d"],{2186:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-button"},[n("CameraSvg",{staticClass:"camera"}),n("input",{attrs:{type:"file"},on:{change:function(e){return t.$emit("change",e)}}})],1)},o=[],a=n("d4ec"),i=n("262e"),s=n("2caf"),c=n("9ab4"),u=n("2b0e"),l=n("2fe1"),d=n("9032"),f=function(t){Object(i["a"])(n,t);var e=Object(s["a"])(n);function n(){return Object(a["a"])(this,n),e.apply(this,arguments)}return n}(u["default"]);f=Object(c["a"])([Object(l["b"])({components:{CameraSvg:d["a"]}})],f);var p=f,m=p,b=(n("d8db"),n("2877")),v=Object(b["a"])(m,r,o,!1,null,"1efdcd72",null);e["a"]=v.exports},"2cdf":function(t,e,n){},"2cee":function(t,e,n){"use strict";n("5067")},"49d6":function(t,e,n){"use strict";n("a105")},"4df4":function(t,e,n){"use strict";var r=n("0366"),o=n("7b0b"),a=n("9bdd"),i=n("e95a"),s=n("50c4"),c=n("8418"),u=n("35a1");t.exports=function(t){var e,n,l,d,f,p,m=o(t),b="function"==typeof this?this:Array,v=arguments.length,h=v>1?arguments[1]:void 0,y=void 0!==h,O=u(m),j=0;if(y&&(h=r(h,v>2?arguments[2]:void 0,2)),void 0==O||b==Array&&i(O))for(e=s(m.length),n=new b(e);e>j;j++)p=y?h(m[j],j):m[j],c(n,j,p);else for(d=O.call(m),f=d.next,n=new b;!(l=f.call(d)).done;j++)p=y?a(d,h,[l.value,j],!0):l.value,c(n,j,p);return n.length=j,n}},5067:function(t,e,n){},5916:function(t,e,n){"use strict";n.r(e);var r,o,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"forum"},[n("div",{staticClass:"d-flex justify-content-between"},[t.forum.categoryId?n("h1",[t._v("Forum :: "+t._s(t.forum.categoryId))]):t._e(),n("div",[n("button",{staticClass:"btn btn-primary",on:{click:t.toCreate}},[t._v("Create")])])]),n("PostEditForm",{staticClass:"m-3",attrs:{forum:t.forum},on:{edited:t.onEdit,cancelled:t.onCancel}}),0==t.forum.post.inEdit?n("section",[t._l(t.forum.posts,(function(e){return n("article",{key:e.idx},[n("PostListTitleClosed",{attrs:{post:e}}),e.inView?n("section",{staticClass:"post-body"},[n("FileList",{attrs:{post:e}}),n("div",{staticClass:"post-content"},[t._v(t._s(e.content))]),n("div",{staticClass:"buttons d-flex"},[n("VoteButtons",{attrs:{post:e}}),n("PostEditButton",{attrs:{post:e}}),n("PostDeleteButton",{attrs:{post:e}})],1),n("CommentEditForm",{attrs:{post:e,parent:e}}),n("div",{staticClass:"no-of-comments"},[t._v(t._s(e.comments.length)+" comments")]),n("div",{staticClass:"comment-list"},t._l(e.comments,(function(r){return n("div",{key:r.idx,staticClass:"comment",attrs:{depth:r.depth}},[n("CommentMeta",{attrs:{comment:r}}),n("FileList",{attrs:{post:r}}),n("CommentContent",{attrs:{comment:r}}),n("div",{staticClass:"buttons d-flex"},[n("button",{staticClass:"btn btn-secondary btn-sm mr-2",on:{click:function(t){r.inReply=!r.inReply}}},[t._v("reply")]),n("VoteButtons",{attrs:{post:r}}),n("CommentEditButton",{attrs:{comment:r}}),n("CommentDeleteButton",{attrs:{comment:r}})],1),r.inReply?n("CommentEditForm",{attrs:{post:e,parent:r}}):t._e(),r.inEdit?n("CommentEditForm",{attrs:{post:e,comment:r}}):t._e()],1)})),0)],1):t._e()],1)})),n("PostListLoading"),n("PostListNoMore")],2):t._e()],1)},i=[],s=n("b85c"),c=n("1da1"),u=n("d4ec"),l=n("bee2"),d=n("262e"),f=n("2caf"),p=(n("96cf"),n("9ab4")),m=n("9f3a"),b=n("2b0e"),v=n("2fe1"),h=n("1b40"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.forum&&t.forum.post&&t.forum.post.inEdit?n("div",[n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[n("PostEditTitle"),n("PostEditContent"),n("div",{staticClass:"d-flex justify-content-between"},[n("FileUploadButton",{attrs:{post:t.forum.post},on:{uploaded:t.onFileUpload,progress:function(e){t.progress=e}}}),n("div",{staticClass:"d-flex"},[n("button",{staticClass:"btn btn-secondary mr-2",on:{click:t.onCancel}},[t._v("Cancel")]),n("PostEditSubmitButton",{attrs:{loading:t.loading}})],1)],1)],1),t.progress?n("b-progress",{staticClass:"mb-3",attrs:{value:t.progress,max:"100"}}):t._e(),n("FileEditList",{attrs:{post:t.forum.post}})],1):t._e()},O=[],j=(n("c740"),n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" "+t._s(t._f("t")("title"))+" "),n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.forum.post.title,expression:"$parent.forum.post.title"}],staticClass:"w-100 form-control",attrs:{type:"text",name:"title"},domProps:{value:t.$parent.forum.post.title},on:{input:function(e){e.target.composing||t.$set(t.$parent.forum.post,"title",e.target.value)}}})])])}),g=[],x=n("2877"),w={},_=Object(x["a"])(w,j,g,!1,null,null,null),E=_.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" "+t._s(t._f("t")("content"))+" "),n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.$parent.forum.post.content,expression:"$parent.forum.post.content"}],ref:"textarea",staticClass:"w-100 form-control",domProps:{value:t.$parent.forum.post.content},on:{input:function(e){e.target.composing||t.$set(t.$parent.forum.post,"content",e.target.value)}}})])])},k=[],$="function"==typeof Map?new Map:(r=[],o=[],{has:function(t){return r.indexOf(t)>-1},get:function(t){return o[r.indexOf(t)]},set:function(t,e){-1===r.indexOf(t)&&(r.push(t),o.push(e))},delete:function(t){var e=r.indexOf(t);e>-1&&(r.splice(e,1),o.splice(e,1))}}),F=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(r){F=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function L(t){var e=$.get(t);e&&e.destroy()}function S(t){var e=$.get(t);e&&e.update()}var P=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((P=function(t){return t}).destroy=function(t){return t},P.update=function(t){return t}):((P=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],(function(t){return function(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!$.has(t)){var e,n=null,r=null,o=null,a=function(){t.clientWidth!==r&&u()},i=function(e){window.removeEventListener("resize",a,!1),t.removeEventListener("input",u,!1),t.removeEventListener("keyup",u,!1),t.removeEventListener("autosize:destroy",i,!1),t.removeEventListener("autosize:update",u,!1),Object.keys(e).forEach((function(n){t.style[n]=e[n]})),$.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",i,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",u,!1),window.addEventListener("resize",a,!1),t.addEventListener("input",u,!1),t.addEventListener("autosize:update",u,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",$.set(t,{destroy:i,update:u}),"vertical"===(e=window.getComputedStyle(t,null)).resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),n="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(n)&&(n=0),u()}function s(e){var n=t.style.width;t.style.width="0px",t.style.width=n,t.style.overflowY=e}function c(){if(0!==t.scrollHeight){var e=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+n+"px",r=t.clientWidth,e.forEach((function(t){t.node.scrollTop=t.scrollTop})),o&&(document.documentElement.scrollTop=o)}}function u(){c();var e=Math.round(parseFloat(t.style.height)),n=window.getComputedStyle(t,null),r="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):t.offsetHeight;if(r<e?"hidden"===n.overflowY&&(s("scroll"),c(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==n.overflowY&&(s("hidden"),c(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),o!==r){o=r;var a=F("autosize:resized");try{t.dispatchEvent(a)}catch(t){}}}}(t)})),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],L),t},P.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],S),t});var D=P,I=D,z=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return Object(l["a"])(n,[{key:"mounted",value:function(){I(this.$refs.textarea)}}]),n}(b["default"]);z=Object(p["a"])([Object(h["a"])({})],z);var A=z,B=A,T=Object(x["a"])(B,C,k,!1,null,null,null),R=T.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?t._e():n("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(" "+t._s(t._f("t")("submit"))+" ")]),t.loading?n("b-spinner",{staticClass:"mx-2",attrs:{type:"grow",variant:"success"}}):t._e()],1)},N=[],U=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return n}(b["default"]);Object(p["a"])([Object(h["b"])({default:!1})],U.prototype,"loading",void 0),U=Object(p["a"])([Object(h["a"])({})],U);var H=U,W=H,V=Object(x["a"])(W,M,N,!1,null,null,null),Y=V.exports,X=n("f6b1"),J=n("7d37"),q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",{staticClass:"row"},t._l(t.post.files,(function(e){return n("div",{key:e.idx,staticClass:"position-relative p-1 col-3",staticStyle:{height:"150px"}},[n("FileEdit",{attrs:{file:e},on:{delete:t.onClickDelete}})],1)})),0)])},G=[],K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"file-edit"},[n("div",{staticClass:"trash",on:{click:function(e){return t.$emit("delete",t.file)}}},[n("trash-svg")],1),n("img",{attrs:{src:t.file.url,alt:t.file.name}})])},Q=[],Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[n("path",{attrs:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}})])},tt=[],et={},nt=Object(x["a"])(et,Z,tt,!1,null,null,null),rt=nt.exports,ot=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return n}(b["default"]);Object(p["a"])([Object(h["b"])()],ot.prototype,"file",void 0),ot=Object(p["a"])([Object(v["b"])({components:{TrashSvg:rt}})],ot);var at=ot,it=at,st=(n("b36b"),Object(x["a"])(it,K,Q,!1,null,"f411df20",null)),ct=st.exports,ut=n("d661"),lt=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.api=m["a"].instance,t}return Object(l["a"])(n,[{key:"onClickDelete",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,X["a"].instance.confirm("Title","Are you sure you want to delete this file?");case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,this.api.fileDelete(e.idx);case 8:this.onFileDelete(e.idx),this.$emit("deleted",e.idx),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),X["a"].instance.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[5,12]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onFileDelete",value:function(t){var e=this.post.files.findIndex((function(e){return e.idx==t}));console.log("index; ",e),this.post.files.splice(e,1),this.post.fileIdxes=Object(ut["b"])(this.post.fileIdxes,t)}}]),n}(b["default"]);Object(p["a"])([Object(h["b"])()],lt.prototype,"post",void 0),lt=Object(p["a"])([Object(v["b"])({components:{FileEdit:ct}})],lt);var dt=lt,ft=dt,pt=Object(x["a"])(ft,q,G,!1,null,null,null),mt=pt.exports,bt=n("3fdf"),vt=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.progress=0,t.api=m["a"].instance,t.loading=!1,t}return Object(l["a"])(n,[{key:"mounted",value:function(){this.forum||alert("[forum] is not binded.")}},{key:"onSubmit",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.loading){t.next=2;break}return t.abrupt("return");case 2:return console.log("post",this.forum.post.toJson),t.prev=3,this.loading=!0,t.next=7,this.forum.post.edit();case 7:e=t.sent,n=this.forum.posts.findIndex((function(t){return t.idx==e.idx})),-1==n?(this.forum.posts.splice(0,0,e),this.forum.posts.splice(-1,1)):this.$set(this.forum.posts,n,e),this.forum.post=new bt["c"],this.$emit("edited",e),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](3),X["a"].instance.error(t.t0);case 17:this.loading=!1;case 18:case"end":return t.stop()}}),t,this,[[3,14]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"onFileUpload",value:function(){var t=this;setTimeout((function(){return t.progress=0}),200)}},{key:"onCancel",value:function(){this.forum.post.inEdit=!1,this.$emit("cancelled",this.forum.post)}}]),n}(b["default"]);Object(p["a"])([Object(h["b"])()],vt.prototype,"forum",void 0),vt=Object(p["a"])([Object(h["a"])({components:{PostEditTitle:E,PostEditContent:R,PostEditSubmitButton:Y,FileUploadButton:J["a"],FileEditList:mt}})],vt);var ht=vt,yt=ht,Ot=Object(x["a"])(yt,y,O,!1,null,null,null),jt=Ot.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.$parent.forum.loading?n("div",{staticClass:"alert alert-info"},[t._v("loading next page ...")]):t._e()])},xt=[],wt={},_t=Object(x["a"])(wt,gt,xt,!1,null,null,null),Et=_t.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$parent.forum.noMore?n("div",{staticClass:"alert alert-warning"},[t._v("There is no more posts")]):t._e()},kt=[],$t={},Ft=Object(x["a"])($t,Ct,kt,!1,null,null,null),Lt=Ft.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title",on:{click:function(e){return t.post.toggleView()}}},[t.post.deleted?n("div",[t._v("Post. "+t._s(t.post.idx)+" has been deleted.")]):n("div",[t._v(t._s(t.post.idx)+" "+t._s(t.post.title))])])},Pt=[],Dt=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return n}(b["default"]);Object(p["a"])([Object(h["b"])()],Dt.prototype,"post",void 0),Dt=Object(p["a"])([Object(h["a"])({})],Dt);var It=Dt,zt=It,At=(n("f07c"),Object(x["a"])(zt,St,Pt,!1,null,"28c8505b",null)),Bt=At.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.post.files,(function(t){return n("div",{key:t.idx},[n("img",{staticClass:"mw-100",attrs:{src:t.url}})])})),0)},Rt=[],Mt=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return n}(b["default"]);Object(p["a"])([Object(h["b"])({default:function(){return new bt["c"]}})],Mt.prototype,"post",void 0),Mt=Object(p["a"])([Object(h["a"])({})],Mt);var Nt=Mt,Ut=Nt,Ht=Object(x["a"])(Ut,Tt,Rt,!1,null,null,null),Wt=Ht.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"btn btn-secondary btn-sm mr-2",on:{click:function(e){return t.post.like()}}},[t._v("Like "+t._s(t.post.Y))]),n("button",{staticClass:"btn btn-secondary btn-sm mr-2",on:{click:function(e){return t.post.dislike()}}},[t._v(" Dislike "+t._s(t.post.N)+" ")])])},Yt=[],Xt=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return n}(b["default"]);Object(p["a"])([Object(h["b"])()],Xt.prototype,"post",void 0),Xt=Object(p["a"])([Object(h["a"])({})],Xt);var Jt=Xt,qt=Jt,Gt=Object(x["a"])(qt,Vt,Yt,!1,null,null,null),Kt=Gt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"btn btn-secondary btn-sm mr-2",on:{click:t.onEdit}},[t._v("Edit")])])},Zt=[],te=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return Object(l["a"])(n,[{key:"onEdit",value:function(){this.$parent.forum.toEdit(this.post)}}]),n}(b["default"]);Object(p["a"])([Object(h["b"])()],te.prototype,"post",void 0),te=Object(p["a"])([Object(h["a"])({})],te);var ee=te,ne=ee,re=Object(x["a"])(ne,Qt,Zt,!1,null,null,null),oe=re.exports,ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"btn btn-secondary btn-sm mr-2",on:{click:t.onDelete}},[t._v("Delete")])])},ie=[],se=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return Object(l["a"])(n,[{key:"onDelete",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X["a"].instance.confirm("Post delete","Do you want to delete this post?");case 3:if(e=t.sent,!1!==e){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,m["a"].instance.postDelete(this.post.idx);case 8:this.post.markDeleted(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),X["a"].instance.error(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()}]),n}(b["default"]);Object(p["a"])([Object(h["b"])()],se.prototype,"post",void 0),se=Object(p["a"])([Object(h["a"])({})],se);var ce=se,ue=ce,le=Object(x["a"])(ue,ae,ie,!1,null,null,null),de=le.exports,fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"d-flex align-items-center mt-2 form"},[n("FileUploadButton",{attrs:{post:t.comment},on:{uploaded:t.onFileUpload,progress:function(e){t.progress=e}}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.content,expression:"comment.content"}],ref:"textarea",domProps:{value:t.comment.content},on:{input:function(e){e.target.composing||t.$set(t.comment,"content",e.target.value)}}}),t.loading?t._e():n("button",{staticClass:"btn btn-primary",on:{click:t.onSubmit}},[t._v("Submit")]),t.loading?n("b-spinner",{staticClass:"mx-2",attrs:{type:"grow",variant:"success"}}):t._e()],1),t.progress?n("b-progress",{staticClass:"mb-3",attrs:{value:t.progress,max:"100"}}):t._e(),n("FileEditList",{attrs:{post:t.comment}})],1)},pe=[],me=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.progress=0,t.loading=!1,t}return Object(l["a"])(n,[{key:"mounted",value:function(){I(this.$refs.textarea)}},{key:"onFileUpload",value:function(){var t=this;setTimeout((function(){return t.progress=0}),200)}},{key:"onSubmit",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.loading){t.next=2;break}return t.abrupt("return");case 2:return this.loading=!0,console.log("this.post;",this.post),console.log("this.parent;",this.parent),this.comment.rootIdx=this.post.idx,0==this.comment.parentIdx&&(this.comment.parentIdx=this.parent.idx),t.prev=7,t.next=10,m["a"].instance.commentEdit(this.comment.toJsonEdit);case 10:e=t.sent,this.comment.idx?(n=this.comment.depth,this.comment.copyWith(e),this.comment.depth=n,this.comment.inEdit=!1):(e.depth=this.parent.depth?+this.parent.depth+1:1,this.post.insertComment(e),this.parent.inReply=!1),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](7),X["a"].instance.error(t.t0);case 17:this.loading=!1;case 18:case"end":return t.stop()}}),t,this,[[7,14]])})));function e(){return t.apply(this,arguments)}return e}()}]),n}(b["default"]);Object(p["a"])([Object(h["b"])()],me.prototype,"post",void 0),Object(p["a"])([Object(h["b"])()],me.prototype,"parent",void 0),Object(p["a"])([Object(h["b"])({default:function(){return new bt["a"]}})],me.prototype,"comment",void 0),me=Object(p["a"])([Object(h["a"])({components:{FileUploadButton:J["a"],FileEditList:mt}})],me);var be=me,ve=be,he=(n("a691c"),Object(x["a"])(ve,fe,pe,!1,null,"6987136f",null)),ye=he.exports,Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.comment.notDeleted?n("div",{staticClass:"comment-meta"},[t._v(" Author "+t._s(t.comment.user.nicknameOrName)+". "+t._s(t.comment.shortDate)+" ")]):t._e()])},je=[],ge=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return n}(b["default"]);Object(p["a"])([Object(h["b"])()],ge.prototype,"comment",void 0),ge=Object(p["a"])([Object(h["a"])({})],ge);var xe=ge,we=xe,_e=(n("fa6f"),Object(x["a"])(we,Oe,je,!1,null,"272ac1be",null)),Ee=_e.exports,Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.comment.notDeleted?n("article",{staticClass:"comment-content"},[t._v(t._s(t.comment.idx)+". "+t._s(t.comment.content))]):n("article",[t._v(t._s(t.comment.idx)+". has been deleted")])])},ke=[],$e=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(u["a"])(this,n),e.apply(this,arguments)}return n}(b["default"]);Object(p["a"])([Object(h["b"])()],$e.prototype,"comment",void 0),$e=Object(p["a"])([Object(h["a"])({})],$e);var Fe=$e,Le=Fe,Se=(n("2cee"),Object(x["a"])(Le,Ce,ke,!1,null,"5b530b2a",null)),Pe=Se.exports,De=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"btn btn-secondary btn-sm mr-2",on:{click:t.onDelete}},[t._v("delete")])])},Ie=[],ze=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.api=m["a"].instance,t}return Object(l["a"])(n,[{key:"onDelete",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,X["a"].instance.confirm("Comment delete","Are you sure you want to delete this comment? [IDX]: ".concat(this.comment.idx));case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,this.api.commentDelete(this.comment.idx);case 8:this.comment.markDeleted(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](5),X["a"].instance.error(t.t0);case 14:case"end":return t.stop()}}),t,this,[[5,11]])})));function e(){return t.apply(this,arguments)}return e}()}]),n}(b["default"]);Object(p["a"])([Object(h["b"])()],ze.prototype,"comment",void 0),ze=Object(p["a"])([Object(h["a"])({})],ze);var Ae=ze,Be=Ae,Te=Object(x["a"])(Be,De,Ie,!1,null,null,null),Re=Te.exports,Me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"btn btn-secondary btn-sm mr-2",on:{click:function(e){t.comment.inEdit=!0}}},[t._v("edit")])])},Ne=[],Ue=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.api=m["a"].instance,t}return n}(b["default"]);Object(p["a"])([Object(h["b"])()],Ue.prototype,"comment",void 0),Ue=Object(p["a"])([Object(h["a"])({})],Ue);var He=Ue,We=He,Ve=Object(x["a"])(We,Me,Ne,!1,null,null,null),Ye=Ve.exports,Xe=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){var t;return Object(u["a"])(this,n),t=e.apply(this,arguments),t.api=m["a"].instance,t.forum=new bt["b"],t}return Object(l["a"])(n,[{key:"mounted",value:function(){this.forum.categoryId=this.$route.params.categoryId,console.log("this.forum.categoryId",this.forum.categoryId),this.loadPage(),this.subscribeScroll()}},{key:"beforeDestroy",value:function(){this.unsubscribeScroll()}},{key:"onCategoryIdChange",value:function(t){this.forum=new bt["b"],this.forum.categoryId=t,this.loadPage()}},{key:"loadPage",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.forum.canLoad){t.next=2;break}return t.abrupt("return");case 2:return console.log("this.forum.page",this.forum.page),this.forum.beginLoad(),t.prev=4,t.next=7,this.api.postSearch(this.forum.searchOptions);case 7:e=t.sent,e.length<this.forum.limit&&(this.forum.noMore=!0),n=Object(s["a"])(e);try{for(n.s();!(r=n.n()).done;)o=r.value,this.forum.posts.push(o),1==this.forum.page&&1==this.forum.posts.length&&o.toggleView()}catch(a){n.e(a)}finally{n.f()}t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](4),alert(t.t0);case 16:this.forum.endLoad();case 17:case"end":return t.stop()}}),t,this,[[4,13]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"subscribeScroll",value:function(){window.addEventListener("scroll",this.scrollWatch)}},{key:"unsubscribeScroll",value:function(){window.removeEventListener("scroll",this.scrollWatch)}},{key:"scrollWatch",value:function(){var t=document.documentElement.scrollTop+window.innerHeight>document.documentElement.offsetHeight-300;t&&this.loadPage()}},{key:"toCreate",value:function(){this.unsubscribeScroll(),this.forum.post.toCreate(this.forum.categoryId)}},{key:"onEdit",value:function(){arguments[0].toggleView(),this.subscribeScroll()}},{key:"onCancel",value:function(){this.subscribeScroll()}}]),n}(b["default"]);Object(p["a"])([Object(h["d"])("$route.params.categoryId")],Xe.prototype,"onCategoryIdChange",null),Xe=Object(p["a"])([Object(v["b"])({components:{PostEditForm:jt,PostListLoading:Et,PostListNoMore:Lt,FileList:Wt,PostListTitleClosed:Bt,VoteButtons:Kt,PostEditButton:oe,PostDeleteButton:de,CommentEditForm:ye,CommentMeta:Ee,CommentContent:Pe,CommentDeleteButton:Re,CommentEditButton:Ye}})],Xe);var Je=Xe,qe=Je,Ge=(n("49d6"),Object(x["a"])(qe,a,i,!1,null,"7e1fd2a1",null));e["default"]=Ge.exports},"7d37":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("UploadButton",{on:{change:t.onFileChange}})],1)},o=[],a=n("1da1"),i=n("d4ec"),s=n("bee2"),c=n("262e"),u=n("2caf"),l=(n("96cf"),n("9ab4")),d=n("9f3a"),f=n("f6b1"),p=n("2b0e"),m=n("2fe1"),b=n("2186"),v=n("1b40"),h=n("d661"),y=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.api=d["a"].instance,t}return Object(s["a"])(n,[{key:"onFileChange",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.api._user.loggedIn){t.next=3;break}return f["a"].instance.error("error_login_first"),t.abrupt("return");case 3:if(null!==e.target.files&&0!==(null===(n=e.target)||void 0===n||null===(r=n.files)||void 0===r?void 0:r.length)){t.next=5;break}return t.abrupt("return");case 5:return o=e.target.files[0],console.log("file; ",o),t.prev=7,t.next=10,this.api.fileUpload(o,{taxonomy:"posts"},(function(t){return i.$emit("progress",t)}));case 10:a=t.sent,this.onFileUpload(a),this.$emit("uploaded",a),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](7),f["a"].instance.error(t.t0);case 18:case"end":return t.stop()}}),t,this,[[7,15]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onFileUpload",value:function(t){this.post.fileIdxes=Object(h["a"])(this.post.fileIdxes,t.idx),console.log("form file idxes;",this.post.fileIdxes),this.post.files.push(t)}}]),n}(p["default"]);Object(l["a"])([Object(v["b"])({default:35})],y.prototype,"size",void 0),Object(l["a"])([Object(v["b"])()],y.prototype,"post",void 0),y=Object(l["a"])([Object(m["b"])({components:{UploadButton:b["a"]}})],y);var O=y,j=O,g=n("2877"),x=Object(g["a"])(j,r,o,!1,null,null,null);e["a"]=x.exports},9032:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}})])},o=[],a=n("2877"),i={},s=Object(a["a"])(i,r,o,!1,null,null,null);e["a"]=s.exports},"9af1":function(t,e,n){},"9bdd":function(t,e,n){var r=n("825a"),o=n("2a62");t.exports=function(t,e,n,a){try{return a?e(r(n)[0],n[1]):e(n)}catch(i){throw o(t),i}}},a105:function(t,e,n){},a453:function(t,e,n){},a630:function(t,e,n){var r=n("23e7"),o=n("4df4"),a=n("1c7e"),i=!a((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:i},{from:o})},a691c:function(t,e,n){"use strict";n("f259")},aa52:function(t,e,n){},b36b:function(t,e,n){"use strict";n("aa52")},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("fb6a"),n("b0c0"),n("a630");function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function a(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(c)throw i}}}}},d8db:function(t,e,n){"use strict";n("2cdf")},f07c:function(t,e,n){"use strict";n("a453")},f259:function(t,e,n){},fa6f:function(t,e,n){"use strict";n("9af1")},fb6a:function(t,e,n){"use strict";var r=n("23e7"),o=n("861d"),a=n("e8b5"),i=n("23cb"),s=n("50c4"),c=n("fc6a"),u=n("8418"),l=n("b622"),d=n("1dde"),f=d("slice"),p=l("species"),m=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var n,r,l,d=c(this),f=s(d.length),v=i(t,f),h=i(void 0===e?f:e,f);if(a(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?o(n)&&(n=n[p],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(d,v,h);for(r=new(void 0===n?Array:n)(b(h-v,0)),l=0;v<h;v++,l++)v in d&&u(r,l,d[v]);return r.length=l,r}})}}]);
//# sourceMappingURL=chunk-6aa3341d.39a84ea9.js.map