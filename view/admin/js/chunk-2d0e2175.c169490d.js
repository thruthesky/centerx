(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e2175"],{"7ce8":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{attrs:{"data-cy":"push-notification-create-page"}},[o("h4",[t._v(t._s(t._f("t")("push_notification")))]),o("form",[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"status"}},[t._v(t._s(t._f("t")("sending_option")))]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.options.notify,expression:"options.notify"}],staticClass:"custom-select",attrs:{id:"notify",name:"notify"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.options,"notify",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"all"}},[t._v(t._s(t._f("t")("all")))]),o("option",{attrs:{value:"topic"}},[t._v(t._s(t._f("t")("topic")))]),o("option",{attrs:{value:"tokens"}},[t._v(t._s(t._f("t")("tokens")))]),o("option",{attrs:{value:"emails"}},[t._v(t._s(t._f("t")("emails")))])])]),"topic"==t.options.notify?o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"topic"}},[t._v(t._s(t._f("t")("topic")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.topic,expression:"options.topic"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("topic"),name:"topic",id:"topic"},domProps:{value:t.options.topic},on:{input:function(e){e.target.composing||t.$set(t.options,"topic",e.target.value)}}})]):t._e(),"tokens"==t.options.notify?o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"tokens"}},[t._v(t._s(t._f("t")("tokens")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.tokens,expression:"options.tokens"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("token"),name:"tokens",id:"tokens"},domProps:{value:t.options.tokens},on:{input:function(e){e.target.composing||t.$set(t.options,"tokens",e.target.value)}}})]):t._e(),"emails"==t.options.notify?o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"emails"}},[t._v(t._s(t._f("t")("emails")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.emails,expression:"options.emails"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("emails"),name:"emails",id:"emails"},domProps:{value:t.options.emails},on:{input:function(e){e.target.composing||t.$set(t.options,"emails",e.target.value)}}}),o("div",{staticClass:"text-muted"},[t._v(" "+t._s("push_notification_emails_help")+" ")])]):t._e(),"emails"==t.options.notify?o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"users"}},[t._v(t._s(t._f("t")("users")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.users,expression:"options.users"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("users"),name:"users",id:"users"},domProps:{value:t.options.users},on:{input:function(e){e.target.composing||t.$set(t.options,"users",e.target.value)}}}),o("div",{staticClass:"text-muted"},[t._v(" "+t._s("push_notification_idxs_help")+" ")])]):t._e(),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"idx"}},[t._v(t._s(t._f("t")("landing post idx")))]),o("div",{staticClass:"input-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.idx,expression:"options.idx"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("post idx"),name:"idx",id:"idx"},domProps:{value:t.options.idx},on:{input:function(e){e.target.composing||t.$set(t.options,"idx",e.target.value)}}}),o("div",{staticClass:"input-group-append"},[o("button",{staticClass:"btn btn-outline-secondary px-5",attrs:{type:"button"},on:{click:function(e){return t.loadPostIdx()}}},[t._v(" "+t._s(t._f("t")("load_post_idx"))+" ")])])])]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"title"}},[t._v(t._s(t._f("t")("title")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.title,expression:"options.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("title"),name:"title",id:"title"},domProps:{value:t.options.title},on:{input:function(e){e.target.composing||t.$set(t.options,"title",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"idx"}},[t._v(t._s(t._f("t")("content")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.body,expression:"options.body"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("content"),name:"body",id:"body"},domProps:{value:t.options.body},on:{input:function(e){e.target.composing||t.$set(t.options,"body",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"click_action"}},[t._v(t._s(t._f("t")("click_url")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.click_action,expression:"options.click_action"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("click_url"),name:"click_action",id:"click_action"},domProps:{value:t.options.click_action},on:{input:function(e){e.target.composing||t.$set(t.options,"click_action",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"imageUrl"}},[t._v(t._s(t._f("t")("icon_url")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.imageUrl,expression:"options.imageUrl"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("icon_url"),name:"imageUrl",id:"imageUrl"},domProps:{value:t.options.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.options,"imageUrl",e.target.value)}}}),o("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s("push_message_icon_url_help")+" ")])]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"sound"}},[t._v(t._s(t._f("t")("sound")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.sound,expression:"options.sound"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("sound"),name:"sound",id:"sound"},domProps:{value:t.options.sound},on:{input:function(e){e.target.composing||t.$set(t.options,"sound",e.target.value)}}}),o("div",{staticClass:"text-muted"},[t._v(" "+t._s("push_notification_sound_help")+" ")])]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"channel"}},[t._v(t._s(t._f("t")("channel_id")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.options.channel,expression:"options.channel"}],staticClass:"form-control",attrs:{type:"text",placeholder:t._f("t")("channel_id"),name:"channel",id:"channel"},domProps:{value:t.options.channel},on:{input:function(e){e.target.composing||t.$set(t.options,"channel",e.target.value)}}})]),o("div",{staticClass:"d-flex justify-content-between mt-2 mb-3"},[o("div",[o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.sendPushNotification()}}},[t.loading?t._e():o("span",[t._v(t._s(t._f("t")("send_notification")))]),t.loading?o("span",[t._v(t._s(t._f("t")("loading")))]):t._e()])])])])])},i=[],n=o("1da1"),a=o("d4ec"),r=o("bee2"),l=o("262e"),c=o("2caf"),p=(o("99af"),o("96cf"),o("9ab4")),u=o("9f3a"),d=o("20d6"),m=o("2b0e"),f=o("2fe1"),v=o("de1e"),_=function(t){Object(l["a"])(o,t);var e=Object(c["a"])(o);function o(){var t;return Object(a["a"])(this,o),t=e.apply(this,arguments),t.as=v["a"].instance,t.options={idx:"",notify:"all",topic:"",tokens:"",emails:"",users:"",title:"",body:"",click_action:"",imageUrl:"",sound:"telephoneringwav.wav",channel:"PUSH_NOTIFICATION"},t.loading=!1,t}return Object(r["a"])(o,[{key:"mounted",value:function(){this.$route.params.postIdx&&(this.options.idx=this.$route.params.postIdx),this.loadPostIdx()}},{key:"loadPostIdx",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(this.options.idx),""!==this.options.idx){t.next=3;break}return t.abrupt("return");case 3:return e={idx:this.options.idx},t.prev=4,t.next=7,u["a"].instance.postGet(e);case 7:o=t.sent,this.options.title=o.title,this.options.body=o.content,this.options.click_action=o.url,o.files.length>0&&(this.options.imageUrl=o.files[0].url),this.loading=!1,t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](4),this.loading=!1,this.as.error(t.t0);case 19:case"end":return t.stop()}}),t,this,[[4,15]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"sendPushNotification",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,o,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.loading){t.next=2;break}return t.abrupt("return");case 2:if(this.loading=!0,e={title:this.options.title,body:this.options.body,click_action:this.options.click_action,imageUrl:this.options.imageUrl,sound:this.options.sound,channel:this.options.channel},this.options.idx&&(e["data"]={idx:this.options.idx,type:"post"}),t.prev=5,o={},"all"!==this.options.notify){t.next=14;break}return e["topic"]=d["a"],t.next=11,u["a"].instance.sendMessageToTopic(e);case 11:o=t.sent,t.next=34;break;case 14:if("topic"!==this.options.notify){t.next=21;break}return e["topic"]=this.options.topic,t.next=18,u["a"].instance.sendMessageToTopic(e);case 18:o=t.sent,t.next=34;break;case 21:if("tokens"!==this.options.notify){t.next=28;break}return e["tokens"]=this.options.tokens,t.next=25,u["a"].instance.sendMessageToTokens(e);case 25:o=t.sent,t.next=34;break;case 28:if("emails"!==this.options.notify){t.next=34;break}return e["emails"]=this.options.emails,e["users"]=this.options.users,t.next=33,u["a"].instance.sendMessageToUsers(e);case 33:o=t.sent;case 34:this.loading=!1,"tokens"===this.options.notify?(s=o.success.length,i=o.error.length,this.as.alert("Send Push Message to tokens: "+"".concat(s," Success, ").concat(i," Fail."))):this.as.alert("Send Push Message to topic : Success Sending push notification to topic."),t.next=42;break;case 38:t.prev=38,t.t0=t["catch"](5),this.loading=!1,this.as.error(t.t0);case 42:case"end":return t.stop()}}),t,this,[[5,38]])})));function e(){return t.apply(this,arguments)}return e}()}]),o}(m["default"]);_=Object(p["a"])([Object(f["b"])({})],_);var h=_,g=h,x=o("2877"),b=Object(x["a"])(g,s,i,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d0e2175.c169490d.js.map